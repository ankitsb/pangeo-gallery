<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Estimating Equilibrium Climate Sensitivity (ECS) in CMIP6 models &#8212; Pangeo Gallery  documentation</title>
    <link rel="stylesheet" href="../../../_static/pangeo-style.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="https://netdna.bootstrapcdn.com/font-awesome/5.0.0/css/font-awesome.min.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/pangeo-gallery.css" />
    <script id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/jquery.js"></script>
    <script src="../../../_static/underscore.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/language_data.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.18.0/dist/embed-amd.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Google Cloud CMIP6 Public Data: Basic Python Example" href="basic_search_and_load.html" />
    <link rel="prev" title="CMIP6 Gallery" href="index.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../../../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../../../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../../../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../../../_static/bootstrap-sphinx.js "></script>

  </head><body>
<div id="navbar" class="navbar navbar-inverse navbar-default navbar-fixed-top">
  <div class="container">
    <div class="navbar-header">
      <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="../../../index.html">
          <span><img src="../../../_static/small_e_reversed_24px.png"></span>
        Pangeo Gallery</a>
    </div>

    <div class="collapse navbar-collapse nav-collapse">
      <ul class="nav navbar-nav">
      <li>
      <nav id="pangeo-breadcrumb" aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item"><a href="index.html">CMIP6 Gallery</a></li>
        
          <li class="breadcrumb-item active"><a href="#">Estimating Equilibrium Climate Sensitivity (ECS) in CMIP6 models</a></li>
        
        </ol>
      </nav>
      </li>
      </ul>
    </div>

  </div>
</div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary">





<div class="badges" id="sidebar-header">
  <p><i class="fa fa-github fa-lg"></i> <a target="_blank" href="https://github.com/pangeo-gallery/cmip6/blob/master/ECS_Gregory_method.ipynb">pangeo-gallery/cmip6/ECS_Gregory_method.ipynb</a></p>
  <a target="_blank" href="https://binder.pangeo.io/v2/gh/pangeo-gallery/cmip6/binder/?urlpath=git-pull?repo=https://github.com/pangeo-gallery/cmip6%26amp%3Burlpath=lab/tree/cmip6/ECS_Gregory_method.ipynb%3Fautodecode"><img alt="Launch Binder" src="https://mybinder.org/badge_logo.svg?style=flat-square" /></a>
</div>

<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../contributing.html">Contributor Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../NCAR/cesm-lens-aws/index.html">Gallery for CESM LENS on AWS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../TomAugspurger/pangeo-dask-gateway/index.html">Pangeo &amp; Dask Gateway.</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../earthcube2020/ec20_abernathey_etal/index.html">Cloud Storage Benchmarks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pangeo-data/landsat-8-tutorial-gallery/index.html">Landsat 8 Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pangeo-data/pangeo-tutorial-gallery/index.html">Pangeo Tutorial Gallery</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">CMIP6 Gallery</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Estimating Equilibrium Climate Sensitivity (ECS) in CMIP6 models</a></li>
<li class="toctree-l2"><a class="reference internal" href="basic_search_and_load.html">Google Cloud CMIP6 Public Data: Basic Python Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="global_mean_surface_temp.html">Global Mean Surface Temperature</a></li>
<li class="toctree-l2"><a class="reference internal" href="intake_ESM_example.html">Load CMIP6 Data with Intake ESM</a></li>
<li class="toctree-l2"><a class="reference internal" href="precip_frequency_change.html">CMIP6 Precipitation Frequency Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="search_and_load_with_esgf_opendap.html">Search and Load CMIP6 Data via ESGF / OPeNDAP</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../example-gallery/index.html">Example Gallery</a></li>
<li class="toctree-l1"><a class="reference internal" href="../physical-oceanography/index.html">Physical Oceanography</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rsignell-usgs/esip-gallery/index.html">ESIP Gallery</a></li>
</ul>

        </div>
      </div>
    <div class="body col-md-9 content" role="main">
      
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container,
div.nbinput.container div.prompt,
div.nbinput.container div.input_area,
div.nbinput.container div[class*=highlight],
div.nbinput.container div[class*=highlight] pre,
div.nboutput.container,
div.nboutput.container div.prompt,
div.nboutput.container div.output_area,
div.nboutput.container div[class*=highlight],
div.nboutput.container div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}
</style>
<div class="section" id="Estimating-Equilibrium-Climate-Sensitivity-(ECS)-in-CMIP6-models">
<h1>Estimating Equilibrium Climate Sensitivity (ECS) in CMIP6 models<a class="headerlink" href="#Estimating-Equilibrium-Climate-Sensitivity-(ECS)-in-CMIP6-models" title="Permalink to this headline">¶</a></h1>
<p><strong>Authors:</strong> <a class="reference external" href="https://eapsweb.mit.edu/people/hdrake">Henry Drake</a> and <a class="reference external" href="https://ocean-transport.github.io/">Ryan Abernathey</a></p>
<p><strong>Adapted from</strong> <a class="reference external" href="https://github.com/hdrake/cmip6-temperature-demo/blob/master/notebooks/01_calculate_ECS_Gregory_method.ipynb">https://github.com/hdrake/cmip6-temperature-demo/blob/master/notebooks/01_calculate_ECS_Gregory_method.ipynb</a></p>
<hr class="docutils" />
<p><em>Definition:</em> Equilibrium Climate Sensitivity is defined as change in global-mean near-surface air temperature (GMST) change due to an instantaneous doubling of CO<span class="math notranslate nohighlight">\(_{2}\)</span> concentrations and once the coupled ocean-atmosphere-sea ice system has acheived a statistical equilibrium (i.e. at the top-of-atmosphere, incoming solar shortwave radiation is balanced by reflected solar shortwave and outgoing thermal longwave radiation).</p>
<p>This notebook uses the <a class="reference external" href="https://agupubs.onlinelibrary.wiley.com/doi/epdf/10.1029/2003GL018747">“Gregory method”</a> to approximate the ECS of CMIP6 models based on the first 150 years after an abrupt quadrupling of CO<span class="math notranslate nohighlight">\(_{2}\)</span> concentrations. The “Gregory Method” extrapolates the quasi-linear relationship between GMST and radiative imbalance at the top-of-atmosphere to estimate how much warming would occur if the system were in radiative balance at the top-of-atmosphere, which is by
definition the equilibrium response. In particular, we extrapolate the linear relationship that occurs between 100 and 150 years after the abrupt quadrupling. Since the radiative forcing due to CO<span class="math notranslate nohighlight">\(_{2}\)</span> is a logarithmic function of the CO<span class="math notranslate nohighlight">\(_{2}\)</span> concentration, the GMST change from a first doubling is roughly the same as for a second doubling (to first order, we can assume feedbacks as constant), which means that the GMST change due to a quadrupling of CO<span class="math notranslate nohighlight">\(_{2}\)</span> is roughly
<span class="math notranslate nohighlight">\(\Delta T_{4 \times \text{CO}_{2}} = 2 \times \text{ECS}\)</span>. See also <a class="reference external" href="https://agupubs.onlinelibrary.wiley.com/doi/epdf/10.1029/2018MS001400">Mauritsen et al. 2019</a> for a detailed application of the Gregory Method (with modifications) for the case of one specific CMIP6 model, the MPI-M Earth System Model.</p>
<p>For another take on applying the Gregory method to estimate ECS, see <a class="reference external" href="https://github.com/apendergrass/cmip6-ecs">Angeline Pendergrass’ code</a>.</p>
<div class="section" id="Python-packages">
<h2>Python packages<a class="headerlink" href="#Python-packages" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
<span class="kn">import</span> <span class="nn">xesmf</span> <span class="k">as</span> <span class="nn">xe</span>
<span class="kn">import</span> <span class="nn">cartopy</span>
<span class="kn">import</span> <span class="nn">dask</span>
<span class="kn">from</span> <span class="nn">tqdm.autonotebook</span> <span class="kn">import</span> <span class="n">tqdm</span>  <span class="c1"># Fancy progress bars for our loops!</span>
<span class="kn">import</span> <span class="nn">intake</span>
<span class="kn">import</span> <span class="nn">fsspec</span>

<span class="o">%</span><span class="k">matplotlib</span> inline
<span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s1">&#39;figure.figsize&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">12</span><span class="p">,</span> <span class="mi">6</span>
<span class="o">%</span><span class="k">config</span> InlineBackend.figure_format = &#39;retina&#39;
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/srv/conda/envs/notebook/lib/python3.7/site-packages/ipykernel_launcher.py:8: TqdmExperimentalWarning: Using `tqdm.autonotebook.tqdm` in notebook mode. Use `tqdm.tqdm` instead to force console mode (e.g. in jupyter console)

</pre></div></div>
</div>
</div>
<div class="section" id="Compute-Cluster">
<h2>Compute Cluster<a class="headerlink" href="#Compute-Cluster" title="Permalink to this headline">¶</a></h2>
<p>Here we use a dask cluster to parallelize our analysis. The cluster scales up and down adaptively.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">dask_gateway</span> <span class="kn">import</span> <span class="n">Gateway</span>
<span class="kn">from</span> <span class="nn">dask.distributed</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">gateway</span> <span class="o">=</span> <span class="n">Gateway</span><span class="p">()</span>
<span class="n">cluster</span> <span class="o">=</span> <span class="n">gateway</span><span class="o">.</span><span class="n">new_cluster</span><span class="p">()</span>
<span class="n">cluster</span><span class="o">.</span><span class="n">adapt</span><span class="p">(</span><span class="n">minimum</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">maximum</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="n">cluster</span><span class="p">)</span>
<span class="n">cluster</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "95e57e7c797842cb9932c59056bb4689", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="section" id="Data-catalogs">
<h3>Data catalogs<a class="headerlink" href="#Data-catalogs" title="Permalink to this headline">¶</a></h3>
<p>This notebook uses <code class="docutils literal notranslate"><span class="pre">`intake-esm</span></code> &lt;<a class="reference external" href="https://intake-esm.readthedocs.io/en/latest/">https://intake-esm.readthedocs.io/en/latest/</a>&gt;`__ to ingest and organize climate model output from the fresh-off-the-supercomputers Phase 6 of the Coupled Model Intercomparison Project (CMIP6).</p>
<p>The file <code class="docutils literal notranslate"><span class="pre">https://storage.googleapis.com/cmip6/cmip6-zarr-consolidated-stores.csv</span></code> in google cloud storage contains thousands of lines of metadata, each describing an individual climate model experiment’s simulated data.</p>
<p>For example, the first line in the csv file contains the precipitation rate (<code class="docutils literal notranslate"><span class="pre">variable_id</span> <span class="pre">=</span> <span class="pre">'pr'</span></code>), as a function of latitude, longitude, and time, in an individual climate model experiment with the BCC-ESM1 model (<code class="docutils literal notranslate"><span class="pre">source_id</span> <span class="pre">=</span> <span class="pre">'BCC-ESM1'</span></code>) developed by the Beijing Climate Center (<code class="docutils literal notranslate"><span class="pre">institution_id</span> <span class="pre">=</span> <span class="pre">'BCC'</span></code>). The model is <em>forced</em> by the forcing experiment SSP370 (<code class="docutils literal notranslate"><span class="pre">experiment_id</span> <span class="pre">=</span> <span class="pre">'ssp370'</span></code>), which stands for the Shared Socio-Economic Pathway 3 that results in a change in radiative forcing
of <span class="math notranslate nohighlight">\(\Delta F = 7.0\)</span> W/m<span class="math notranslate nohighlight">\(^{2}\)</span> from pre-industrial to 2100. This simulation was run as part of the <code class="docutils literal notranslate"><span class="pre">AerChemMIP</span></code> activity, which is a spin-off of the CMIP activity that focuses specifically on how aerosol chemistry affects climate.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;https://storage.googleapis.com/cmip6/cmip6-zarr-consolidated-stores.csv&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>activity_id</th>
      <th>institution_id</th>
      <th>source_id</th>
      <th>experiment_id</th>
      <th>member_id</th>
      <th>table_id</th>
      <th>variable_id</th>
      <th>grid_label</th>
      <th>zstore</th>
      <th>dcpp_init_year</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>AerChemMIP</td>
      <td>AS-RCEC</td>
      <td>TaiESM1</td>
      <td>histSST</td>
      <td>r1i1p1f1</td>
      <td>AERmon</td>
      <td>od550aer</td>
      <td>gn</td>
      <td>gs://cmip6/AerChemMIP/AS-RCEC/TaiESM1/histSST/...</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>AerChemMIP</td>
      <td>BCC</td>
      <td>BCC-ESM1</td>
      <td>histSST</td>
      <td>r1i1p1f1</td>
      <td>AERmon</td>
      <td>mmrbc</td>
      <td>gn</td>
      <td>gs://cmip6/AerChemMIP/BCC/BCC-ESM1/histSST/r1i...</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>AerChemMIP</td>
      <td>BCC</td>
      <td>BCC-ESM1</td>
      <td>histSST</td>
      <td>r1i1p1f1</td>
      <td>AERmon</td>
      <td>mmrdust</td>
      <td>gn</td>
      <td>gs://cmip6/AerChemMIP/BCC/BCC-ESM1/histSST/r1i...</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>AerChemMIP</td>
      <td>BCC</td>
      <td>BCC-ESM1</td>
      <td>histSST</td>
      <td>r1i1p1f1</td>
      <td>AERmon</td>
      <td>mmroa</td>
      <td>gn</td>
      <td>gs://cmip6/AerChemMIP/BCC/BCC-ESM1/histSST/r1i...</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>AerChemMIP</td>
      <td>BCC</td>
      <td>BCC-ESM1</td>
      <td>histSST</td>
      <td>r1i1p1f1</td>
      <td>AERmon</td>
      <td>mmrso4</td>
      <td>gn</td>
      <td>gs://cmip6/AerChemMIP/BCC/BCC-ESM1/histSST/r1i...</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>The file <code class="docutils literal notranslate"><span class="pre">pangeo-cmip6.json</span></code> describes the structure of the CMIP6 metadata and is formatted so as to be read in by the <code class="docutils literal notranslate"><span class="pre">intake.open_esm_datastore</span></code> method, which categorizes all of the data pointers into a tiered collection. For example, this collection contains the simulated data from 28691 individual experiments, representing 48 different models from 23 different scientific institutions. There are 190 different climate variables (e.g. sea surface temperature, sea ice concentration,
atmospheric winds, dissolved organic carbon in the ocean, etc.) available for 29 different forcing experiments.</p>
</div>
</div>
<div class="section" id="Use-Intake-ESM">
<h2>Use Intake ESM<a class="headerlink" href="#Use-Intake-ESM" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://intake-esm.readthedocs.io/">Intake-esm</a> is a new package designed to make working with these data archives a bit simpler.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">col</span> <span class="o">=</span> <span class="n">intake</span><span class="o">.</span><span class="n">open_esm_datastore</span><span class="p">(</span><span class="s2">&quot;https://storage.googleapis.com/cmip6/pangeo-cmip6.json&quot;</span><span class="p">)</span>
<span class="n">col</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
pangeo-cmip6-ESM Collection with 257905 entries:
        &gt; 15 activity_id(s)

        &gt; 33 institution_id(s)

        &gt; 68 source_id(s)

        &gt; 101 experiment_id(s)

        &gt; 140 member_id(s)

        &gt; 29 table_id(s)

        &gt; 368 variable_id(s)

        &gt; 10 grid_label(s)

        &gt; 257905 zstore(s)

        &gt; 60 dcpp_init_year(s)
</pre></div></div>
</div>
<p>Here, we show the various forcing experiments that climate modellers ran in these simulations.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">df</span><span class="p">[</span><span class="s1">&#39;experiment_id&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
array([&#39;histSST&#39;, &#39;piClim-CH4&#39;, &#39;piClim-NTCF&#39;, &#39;piClim-control&#39;, &#39;ssp370&#39;,
       &#39;piClim-2xDMS&#39;, &#39;piClim-2xdust&#39;, &#39;piClim-2xfire&#39;, &#39;piClim-2xss&#39;,
       &#39;piClim-BC&#39;, &#39;piClim-HC&#39;, &#39;piClim-N2O&#39;, &#39;piClim-OC&#39;, &#39;piClim-SO2&#39;,
       &#39;piClim-aer&#39;, &#39;1pctCO2-bgc&#39;, &#39;esm-ssp585&#39;, &#39;hist-bgc&#39;,
       &#39;amip-4xCO2&#39;, &#39;amip-future4K&#39;, &#39;amip-m4K&#39;, &#39;amip-p4K&#39;, &#39;amip&#39;,
       &#39;abrupt-2xCO2&#39;, &#39;abrupt-solp4p&#39;, &#39;abrupt-0p5xCO2&#39;, &#39;amip-lwoff&#39;,
       &#39;amip-p4K-lwoff&#39;, &#39;aqua-4xCO2&#39;, &#39;abrupt-solm4p&#39;,
       &#39;aqua-control-lwoff&#39;, &#39;aqua-control&#39;, &#39;aqua-p4K-lwoff&#39;, &#39;aqua-p4K&#39;,
       &#39;1pctCO2&#39;, &#39;abrupt-4xCO2&#39;, &#39;historical&#39;, &#39;piControl&#39;, &#39;esm-hist&#39;,
       &#39;esm-piControl&#39;, &#39;ssp126&#39;, &#39;ssp245&#39;, &#39;ssp585&#39;,
       &#39;esm-piControl-spinup&#39;, &#39;piControl-spinup&#39;, &#39;hist-GHG&#39;, &#39;hist-aer&#39;,
       &#39;hist-nat&#39;, &#39;hist-CO2&#39;, &#39;hist-sol&#39;, &#39;hist-stratO3&#39;, &#39;hist-volc&#39;,
       &#39;ssp245-GHG&#39;, &#39;ssp245-aer&#39;, &#39;ssp245-nat&#39;, &#39;ssp245-stratO3&#39;,
       &#39;dcppA-hindcast&#39;, &#39;dcppA-assim&#39;, &#39;dcppC-hindcast-noAgung&#39;,
       &#39;dcppC-hindcast-noElChichon&#39;, &#39;dcppC-hindcast-noPinatubo&#39;,
       &#39;dcppC-amv-neg&#39;, &#39;dcppC-amv-pos&#39;, &#39;dcppC-amv-ExTrop-neg&#39;,
       &#39;dcppC-amv-ExTrop-pos&#39;, &#39;dcppC-amv-Trop-neg&#39;, &#39;dcppC-amv-Trop-pos&#39;,
       &#39;dcppC-atl-control&#39;, &#39;dcppC-atl-pacemaker&#39;,
       &#39;dcppC-ipv-NexTrop-neg&#39;, &#39;dcppC-ipv-NexTrop-pos&#39;, &#39;dcppC-ipv-neg&#39;,
       &#39;dcppC-ipv-pos&#39;, &#39;dcppC-pac-control&#39;, &#39;dcppC-pac-pacemaker&#39;,
       &#39;faf-heat&#39;, &#39;faf-passiveheat&#39;, &#39;faf-stress&#39;, &#39;faf-water&#39;,
       &#39;faf-all&#39;, &#39;amip-hist&#39;, &#39;highresSST-present&#39;, &#39;hist-1950&#39;,
       &#39;control-1950&#39;, &#39;land-hist&#39;, &#39;deforest-globe&#39;,
       &#39;esm-ssp585-ssp126Lu&#39;, &#39;hist-noLu&#39;, &#39;land-noLu&#39;, &#39;omip1&#39;,
       &#39;lig127k&#39;, &#39;midHolocene&#39;, &#39;lgm&#39;, &#39;piClim-4xCO2&#39;, &#39;piClim-anthro&#39;,
       &#39;piClim-ghg&#39;, &#39;piClim-lu&#39;, &#39;ssp119&#39;, &#39;ssp434&#39;, &#39;ssp460&#39;,
       &#39;ssp534-over&#39;], dtype=object)
</pre></div></div>
</div>
<div class="section" id="Analysis-of-Climate-Model-Output-Data">
<h3>Analysis of Climate Model Output Data<a class="headerlink" href="#Analysis-of-Climate-Model-Output-Data" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="Loading-data">
<h2>Loading data<a class="headerlink" href="#Loading-data" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://intake-esm.readthedocs.io/">intake-esm</a> enables loading data directly into an <a class="reference external" href="http://xarray.pydata.org/en/stable/api.html#dataset">xarray.DataArray</a>, a metadata-aware extension of numpy arrays. <code class="docutils literal notranslate"><span class="pre">xarray</span></code> objects leverage <a class="reference external" href="https://dask.org/">dask</a> to only read data into memory as needed for any specific operation (i.e. lazy evaluation). Think of <code class="docutils literal notranslate"><span class="pre">xarray</span></code> Datasets as ways of conveniently organizing large arrays of floating point numbers (e.g. climate model data) on an
n-dimensional discrete grid, with important metadata such as units, variable, names, etc.</p>
<p>Note that data on the cloud are in <a class="reference external" href="https://zarr.readthedocs.io/en/stable/">zarr</a> format, an extension of the metadata-aware format <a class="reference external" href="https://www.unidata.ucar.edu/software/netcdf/">netcdf</a> commonly used in geosciences.</p>
<p><code class="docutils literal notranslate"><span class="pre">intake-esm</span></code> has rules for aggegating datasets; these rules are defined in the collection-specification file.</p>
<p>Here, we choose the <code class="docutils literal notranslate"><span class="pre">piControl</span></code> experiment (in which CO2 concentrations are held fixed at a pre-industrial level of ~300 ppm) and <code class="docutils literal notranslate"><span class="pre">abrupt-4xCO2</span></code> experiment (in which CO2 concentrations are instantaneously quadrupled - or doubled twice - from a pre-industrial controrl state). Since the radiative forcing of CO2 is roughly a logarithmic function of CO2 concentrations, the ECS is roughly independent of the initial CO2 concentration. Thus, if one doubling of CO2 results in <span class="math notranslate nohighlight">\(ECS\)</span> of warming,
then two doublings (or, a quadrupling) results in <span class="math notranslate nohighlight">\(2 \times ECS\)</span> of warming.</p>
<p>Ideally, we would choose the <code class="docutils literal notranslate"><span class="pre">abrupt-2xCO2</span></code> forcing experiment, but more 4xCO2 data are currently avaiable in Google Cloud Storage, making for a better example.</p>
</div>
<div class="section" id="Prepare-Data">
<h2>Prepare Data<a class="headerlink" href="#Prepare-Data" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">query</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="n">experiment_id</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;abrupt-4xCO2&#39;</span><span class="p">,</span><span class="s1">&#39;piControl&#39;</span><span class="p">],</span> <span class="c1"># pick the `abrupt-4xCO2` and `piControl` forcing experiments</span>
    <span class="n">table_id</span><span class="o">=</span><span class="s1">&#39;Amon&#39;</span><span class="p">,</span>                            <span class="c1"># choose to look at atmospheric variables (A) saved at monthly resolution (mon)</span>
    <span class="n">variable_id</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;tas&#39;</span><span class="p">,</span> <span class="s1">&#39;rsut&#39;</span><span class="p">,</span><span class="s1">&#39;rsdt&#39;</span><span class="p">,</span><span class="s1">&#39;rlut&#39;</span><span class="p">],</span>  <span class="c1"># choose to look at near-surface air temperature (tas) as our variable</span>
    <span class="n">member_id</span> <span class="o">=</span> <span class="s1">&#39;r1i1p1f1&#39;</span><span class="p">,</span>                     <span class="c1"># arbitrarily pick one realization for each model (i.e. just one set of initial conditions)</span>
<span class="p">)</span>

<span class="n">col_subset</span> <span class="o">=</span> <span class="n">col</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">require_all_on</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;source_id&quot;</span><span class="p">],</span> <span class="o">**</span><span class="n">query</span><span class="p">)</span>
<span class="n">col_subset</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s2">&quot;source_id&quot;</span><span class="p">)[</span>
    <span class="p">[</span><span class="s2">&quot;experiment_id&quot;</span><span class="p">,</span> <span class="s2">&quot;variable_id&quot;</span><span class="p">,</span> <span class="s2">&quot;table_id&quot;</span><span class="p">]</span>
<span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>experiment_id</th>
      <th>variable_id</th>
      <th>table_id</th>
    </tr>
    <tr>
      <th>source_id</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>ACCESS-CM2</th>
      <td>2</td>
      <td>4</td>
      <td>1</td>
    </tr>
    <tr>
      <th>ACCESS-ESM1-5</th>
      <td>2</td>
      <td>4</td>
      <td>1</td>
    </tr>
    <tr>
      <th>BCC-CSM2-MR</th>
      <td>2</td>
      <td>4</td>
      <td>1</td>
    </tr>
    <tr>
      <th>BCC-ESM1</th>
      <td>2</td>
      <td>4</td>
      <td>1</td>
    </tr>
    <tr>
      <th>CAMS-CSM1-0</th>
      <td>2</td>
      <td>4</td>
      <td>1</td>
    </tr>
    <tr>
      <th>CESM2</th>
      <td>2</td>
      <td>4</td>
      <td>1</td>
    </tr>
    <tr>
      <th>CESM2-WACCM</th>
      <td>2</td>
      <td>4</td>
      <td>1</td>
    </tr>
    <tr>
      <th>CanESM5</th>
      <td>2</td>
      <td>4</td>
      <td>1</td>
    </tr>
    <tr>
      <th>E3SM-1-0</th>
      <td>2</td>
      <td>4</td>
      <td>1</td>
    </tr>
    <tr>
      <th>EC-Earth3-Veg</th>
      <td>2</td>
      <td>4</td>
      <td>1</td>
    </tr>
    <tr>
      <th>GFDL-CM4</th>
      <td>2</td>
      <td>4</td>
      <td>1</td>
    </tr>
    <tr>
      <th>GFDL-ESM4</th>
      <td>2</td>
      <td>4</td>
      <td>1</td>
    </tr>
    <tr>
      <th>GISS-E2-1-G</th>
      <td>2</td>
      <td>4</td>
      <td>1</td>
    </tr>
    <tr>
      <th>GISS-E2-1-H</th>
      <td>2</td>
      <td>4</td>
      <td>1</td>
    </tr>
    <tr>
      <th>INM-CM4-8</th>
      <td>2</td>
      <td>4</td>
      <td>1</td>
    </tr>
    <tr>
      <th>IPSL-CM6A-LR</th>
      <td>2</td>
      <td>4</td>
      <td>1</td>
    </tr>
    <tr>
      <th>KACE-1-0-G</th>
      <td>2</td>
      <td>4</td>
      <td>1</td>
    </tr>
    <tr>
      <th>MIROC6</th>
      <td>2</td>
      <td>4</td>
      <td>1</td>
    </tr>
    <tr>
      <th>MPI-ESM1-2-HR</th>
      <td>2</td>
      <td>4</td>
      <td>1</td>
    </tr>
    <tr>
      <th>MRI-ESM2-0</th>
      <td>2</td>
      <td>4</td>
      <td>1</td>
    </tr>
    <tr>
      <th>NESM3</th>
      <td>2</td>
      <td>4</td>
      <td>1</td>
    </tr>
    <tr>
      <th>SAM0-UNICON</th>
      <td>2</td>
      <td>4</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>The following functions help us load and homogenize the data. We use some <a class="reference external" href="https://docs.dask.org/en/latest/delayed.html">dask.delayed</a> programming to open the datasets in parallel.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">drop_all_bounds</span><span class="p">(</span><span class="n">ds</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Drop coordinates like &#39;time_bounds&#39; from datasets,</span>
<span class="sd">    which can lead to issues when merging.&quot;&quot;&quot;</span>
    <span class="n">drop_vars</span> <span class="o">=</span> <span class="p">[</span><span class="n">vname</span> <span class="k">for</span> <span class="n">vname</span> <span class="ow">in</span> <span class="n">ds</span><span class="o">.</span><span class="n">coords</span>
                 <span class="k">if</span> <span class="p">((</span><span class="s1">&#39;_bounds&#39;</span><span class="p">)</span> <span class="ow">in</span> <span class="n">vname</span> <span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="s1">&#39;_bnds&#39;</span><span class="p">)</span> <span class="ow">in</span> <span class="n">vname</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">ds</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">drop_vars</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">open_dsets</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Open datasets from cloud storage and return xarray dataset.&quot;&quot;&quot;</span>
    <span class="n">dsets</span> <span class="o">=</span> <span class="p">[</span><span class="n">xr</span><span class="o">.</span><span class="n">open_zarr</span><span class="p">(</span><span class="n">fsspec</span><span class="o">.</span><span class="n">get_mapper</span><span class="p">(</span><span class="n">ds_url</span><span class="p">),</span> <span class="n">consolidated</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
             <span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">drop_all_bounds</span><span class="p">)</span>
             <span class="k">for</span> <span class="n">ds_url</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">zstore</span><span class="p">]</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="n">dsets</span><span class="p">,</span> <span class="n">join</span><span class="o">=</span><span class="s1">&#39;exact&#39;</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ds</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">return</span> <span class="kc">None</span>

<span class="k">def</span> <span class="nf">open_delayed</span><span class="p">(</span><span class="n">df</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A dask.delayed wrapper around `open_dsets`.</span>
<span class="sd">    Allows us to open many datasets in parallel.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">dask</span><span class="o">.</span><span class="n">delayed</span><span class="p">(</span><span class="n">open_dsets</span><span class="p">)(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Create a nested dictionary of models and experiments. It will be structured like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;CESM2&#39;</span><span class="p">:</span>
  <span class="p">{</span>
    <span class="s1">&#39;piControl&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">xarray</span><span class="o">.</span><span class="n">Dataset</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="s1">&#39;abrupt-4xCO2&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">xarray</span><span class="o">.</span><span class="n">Dataset</span><span class="o">&gt;</span>
  <span class="p">},</span>
  <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>

<span class="n">dsets</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
<span class="k">for</span> <span class="n">group</span><span class="p">,</span> <span class="n">df</span> <span class="ow">in</span> <span class="n">col_subset</span><span class="o">.</span><span class="n">df</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;source_id&#39;</span><span class="p">,</span> <span class="s1">&#39;experiment_id&#39;</span><span class="p">]):</span>
    <span class="n">dsets</span><span class="p">[</span><span class="n">group</span><span class="p">[</span><span class="mi">0</span><span class="p">]][</span><span class="n">group</span><span class="p">[</span><span class="mi">1</span><span class="p">]]</span> <span class="o">=</span> <span class="n">open_delayed</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Open one of the datasets directly, just to show what it looks like:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="o">%</span><span class="k">time</span> open_dsets(df)
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
CPU times: user 506 ms, sys: 37.8 ms, total: 543 ms
Wall time: 590 ms
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<title>Show/Hide data repr</title>
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<title>Show/Hide attributes</title>
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

.xr-wrap {
  min-width: 300px;
  max-width: 700px;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt, dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><div class='xr-wrap'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-ef66cf43-6284-4bd7-8acd-e55f34b81ffd' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-ef66cf43-6284-4bd7-8acd-e55f34b81ffd' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>lat</span>: 192</li><li><span class='xr-has-index'>lon</span>: 288</li><li><span class='xr-has-index'>time</span>: 8400</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-c3b2ae1c-74b3-4ccc-93de-c8184eb4fd4d' class='xr-section-summary-in' type='checkbox'  checked><label for='section-c3b2ae1c-74b3-4ccc-93de-c8184eb4fd4d' class='xr-section-summary' >Coordinates: <span>(4)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lat</span></div><div class='xr-var-dims'>(lat)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-90.0 -89.06 -88.12 ... 89.06 90.0</div><input id='attrs-b879366a-5077-44b5-8e85-e10515579998' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-b879366a-5077-44b5-8e85-e10515579998' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-44a8c347-f471-4acd-aeee-0b421501d395' class='xr-var-data-in' type='checkbox'><label for='data-44a8c347-f471-4acd-aeee-0b421501d395' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>axis :</span></dt><dd>Y</dd><dt><span>bounds :</span></dt><dd>lat_bnds</dd><dt><span>long_name :</span></dt><dd>Latitude</dd><dt><span>standard_name :</span></dt><dd>latitude</dd><dt><span>units :</span></dt><dd>degrees_north</dd></dl></div><pre class='xr-var-data'>array([-90.      , -89.057592, -88.115183, -87.172775, -86.230366, -85.287958,
       -84.34555 , -83.403141, -82.460733, -81.518325, -80.575916, -79.633508,
       -78.691099, -77.748691, -76.806283, -75.863874, -74.921466, -73.979058,
       -73.036649, -72.094241, -71.151832, -70.209424, -69.267016, -68.324607,
       -67.382199, -66.439791, -65.497382, -64.554974, -63.612565, -62.670157,
       -61.727749, -60.78534 , -59.842932, -58.900524, -57.958115, -57.015707,
       -56.073298, -55.13089 , -54.188482, -53.246073, -52.303665, -51.361257,
       -50.418848, -49.47644 , -48.534031, -47.591623, -46.649215, -45.706806,
       -44.764398, -43.82199 , -42.879581, -41.937173, -40.994764, -40.052356,
       -39.109948, -38.167539, -37.225131, -36.282723, -35.340314, -34.397906,
       -33.455497, -32.513089, -31.570681, -30.628272, -29.685864, -28.743455,
       -27.801047, -26.858639, -25.91623 , -24.973822, -24.031414, -23.089005,
       -22.146597, -21.204188, -20.26178 , -19.319372, -18.376963, -17.434555,
       -16.492147, -15.549738, -14.60733 , -13.664921, -12.722513, -11.780105,
       -10.837696,  -9.895288,  -8.95288 ,  -8.010471,  -7.068063,  -6.125654,
        -5.183246,  -4.240838,  -3.298429,  -2.356021,  -1.413613,  -0.471204,
         0.471204,   1.413613,   2.356021,   3.298429,   4.240838,   5.183246,
         6.125654,   7.068063,   8.010471,   8.95288 ,   9.895288,  10.837696,
        11.780105,  12.722513,  13.664921,  14.60733 ,  15.549738,  16.492147,
        17.434555,  18.376963,  19.319372,  20.26178 ,  21.204188,  22.146597,
        23.089005,  24.031414,  24.973822,  25.91623 ,  26.858639,  27.801047,
        28.743455,  29.685864,  30.628272,  31.570681,  32.513089,  33.455497,
        34.397906,  35.340314,  36.282723,  37.225131,  38.167539,  39.109948,
        40.052356,  40.994764,  41.937173,  42.879581,  43.82199 ,  44.764398,
        45.706806,  46.649215,  47.591623,  48.534031,  49.47644 ,  50.418848,
        51.361257,  52.303665,  53.246073,  54.188482,  55.13089 ,  56.073298,
        57.015707,  57.958115,  58.900524,  59.842932,  60.78534 ,  61.727749,
        62.670157,  63.612565,  64.554974,  65.497382,  66.439791,  67.382199,
        68.324607,  69.267016,  70.209424,  71.151832,  72.094241,  73.036649,
        73.979058,  74.921466,  75.863874,  76.806283,  77.748691,  78.691099,
        79.633508,  80.575916,  81.518325,  82.460733,  83.403141,  84.34555 ,
        85.287958,  86.230366,  87.172775,  88.115183,  89.057592,  90.      ])</pre></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>lon</span></div><div class='xr-var-dims'>(lon)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 1.25 2.5 ... 356.2 357.5 358.8</div><input id='attrs-46a99cab-4901-41ad-af05-34bb9b9fd4fc' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-46a99cab-4901-41ad-af05-34bb9b9fd4fc' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-3e2cca7e-74d7-4966-a801-509d3f8e6a83' class='xr-var-data-in' type='checkbox'><label for='data-3e2cca7e-74d7-4966-a801-509d3f8e6a83' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>axis :</span></dt><dd>X</dd><dt><span>bounds :</span></dt><dd>lon_bnds</dd><dt><span>long_name :</span></dt><dd>Longitude</dd><dt><span>standard_name :</span></dt><dd>longitude</dd><dt><span>units :</span></dt><dd>degrees_east</dd></dl></div><pre class='xr-var-data'>array([  0.  ,   1.25,   2.5 , ..., 356.25, 357.5 , 358.75])</pre></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>0001-01-16 12:00:00 ... 0700-12-16 12:00:00</div><input id='attrs-c553ed6e-db2f-42d7-b0e8-4857a04847cf' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-c553ed6e-db2f-42d7-b0e8-4857a04847cf' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-0c248e4a-47eb-47d2-bdc0-bb5a64404d3e' class='xr-var-data-in' type='checkbox'><label for='data-0c248e4a-47eb-47d2-bdc0-bb5a64404d3e' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>axis :</span></dt><dd>T</dd><dt><span>bounds :</span></dt><dd>time_bnds</dd><dt><span>long_name :</span></dt><dd>time</dd><dt><span>standard_name :</span></dt><dd>time</dd></dl></div><pre class='xr-var-data'>array([cftime.DatetimeNoLeap(0001-01-16 12:00:00),
       cftime.DatetimeNoLeap(0001-02-15 00:00:00),
       cftime.DatetimeNoLeap(0001-03-16 12:00:00), ...,
       cftime.DatetimeNoLeap(0700-10-16 12:00:00),
       cftime.DatetimeNoLeap(0700-11-16 00:00:00),
       cftime.DatetimeNoLeap(0700-12-16 12:00:00)], dtype=object)</pre></li><li class='xr-var-item'><div class='xr-var-name'><span>height</span></div><div class='xr-var-dims'>()</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-24d6a5c8-bd44-413a-8523-a33ac3417f6c' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-24d6a5c8-bd44-413a-8523-a33ac3417f6c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a5a94b8c-1d65-440c-a59b-f2c47c9ad62d' class='xr-var-data-in' type='checkbox'><label for='data-a5a94b8c-1d65-440c-a59b-f2c47c9ad62d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>axis :</span></dt><dd>Z</dd><dt><span>long_name :</span></dt><dd>height</dd><dt><span>positive :</span></dt><dd>up</dd><dt><span>standard_name :</span></dt><dd>height</dd><dt><span>units :</span></dt><dd>m</dd></dl></div><pre class='xr-var-data'>array(2.)</pre></li></ul></div></li><li class='xr-section-item'><input id='section-6ccb3bcd-80d8-40aa-b654-45b76771805b' class='xr-section-summary-in' type='checkbox'  checked><label for='section-6ccb3bcd-80d8-40aa-b654-45b76771805b' class='xr-section-summary' >Data variables: <span>(4)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>rlut</span></div><div class='xr-var-dims'>(time, lat, lon)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(600, 192, 288), meta=np.ndarray&gt;</div><input id='attrs-124cab17-abf7-4ebb-8714-2b6a838bde86' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-124cab17-abf7-4ebb-8714-2b6a838bde86' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-7d1e1334-6a02-4380-8344-2854cc638635' class='xr-var-data-in' type='checkbox'><label for='data-7d1e1334-6a02-4380-8344-2854cc638635' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>cell_measures :</span></dt><dd>area: areacella</dd><dt><span>cell_methods :</span></dt><dd>area: time: mean (interval: 1 month)</dd><dt><span>comment :</span></dt><dd>at the top of the atmosphere (to be compared with satellite measurements)</dd><dt><span>long_name :</span></dt><dd>TOA Outgoing Longwave Radiation</dd><dt><span>original_units :</span></dt><dd>W/m2</dd><dt><span>standard_name :</span></dt><dd>toa_outgoing_longwave_flux</dd><dt><span>units :</span></dt><dd>W m-2</dd></dl></div><pre class='xr-var-data'><table>
<tr>
<td>
<table>
  <thead>
    <tr><td> </td><th> Array </th><th> Chunk </th></tr>
  </thead>
  <tbody>
    <tr><th> Bytes </th><td> 1.86 GB </td> <td> 132.71 MB </td></tr>
    <tr><th> Shape </th><td> (8400, 192, 288) </td> <td> (600, 192, 288) </td></tr>
    <tr><th> Count </th><td> 15 Tasks </td><td> 14 Chunks </td></tr>
    <tr><th> Type </th><td> float32 </td><td> numpy.ndarray </td></tr>
  </tbody>
</table>
</td>
<td>
<svg width="162" height="150" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="80" y2="70" style="stroke-width:2" />
  <line x1="10" y1="29" x2="80" y2="100" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="10" y2="29" style="stroke-width:2" />
  <line x1="15" y1="5" x2="15" y2="34" />
  <line x1="20" y1="10" x2="20" y2="39" />
  <line x1="25" y1="15" x2="25" y2="44" />
  <line x1="30" y1="20" x2="30" y2="49" />
  <line x1="35" y1="25" x2="35" y2="55" />
  <line x1="40" y1="30" x2="40" y2="60" />
  <line x1="45" y1="35" x2="45" y2="65" />
  <line x1="50" y1="40" x2="50" y2="70" />
  <line x1="55" y1="45" x2="55" y2="75" />
  <line x1="60" y1="50" x2="60" y2="80" />
  <line x1="65" y1="55" x2="65" y2="85" />
  <line x1="70" y1="60" x2="70" y2="90" />
  <line x1="75" y1="65" x2="75" y2="95" />
  <line x1="80" y1="70" x2="80" y2="100" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.000000,0.000000 80.588235,70.588235 80.588235,100.379498 10.000000,29.791262" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="42" y2="0" style="stroke-width:2" />
  <line x1="15" y1="5" x2="47" y2="5" />
  <line x1="20" y1="10" x2="52" y2="10" />
  <line x1="25" y1="15" x2="57" y2="15" />
  <line x1="30" y1="20" x2="62" y2="20" />
  <line x1="35" y1="25" x2="67" y2="25" />
  <line x1="40" y1="30" x2="72" y2="30" />
  <line x1="45" y1="35" x2="77" y2="35" />
  <line x1="50" y1="40" x2="82" y2="40" />
  <line x1="55" y1="45" x2="87" y2="45" />
  <line x1="60" y1="50" x2="92" y2="50" />
  <line x1="65" y1="55" x2="97" y2="55" />
  <line x1="70" y1="60" x2="102" y2="60" />
  <line x1="75" y1="65" x2="107" y2="65" />
  <line x1="80" y1="70" x2="112" y2="70" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="80" y2="70" style="stroke-width:2" />
  <line x1="42" y1="0" x2="112" y2="70" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.000000,0.000000 42.194899,0.000000 112.783134,70.588235 80.588235,70.588235" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="80" y1="70" x2="112" y2="70" style="stroke-width:2" />
  <line x1="80" y1="100" x2="112" y2="100" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="80" y1="70" x2="80" y2="100" style="stroke-width:2" />
  <line x1="112" y1="70" x2="112" y2="100" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="80.588235,70.588235 112.783134,70.588235 112.783134,100.379498 80.588235,100.379498" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="96.685685" y="120.379498" font-size="1.0rem" font-weight="100" text-anchor="middle" >288</text>
  <text x="132.783134" y="85.483867" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,132.783134,85.483867)">192</text>
  <text x="35.294118" y="85.085380" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(45,35.294118,85.085380)">8400</text>
</svg>
</td>
</tr>
</table></pre></li><li class='xr-var-item'><div class='xr-var-name'><span>rsdt</span></div><div class='xr-var-dims'>(time, lat, lon)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(600, 192, 288), meta=np.ndarray&gt;</div><input id='attrs-976f8ff0-2c48-4e2b-8406-7c6935f8f06a' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-976f8ff0-2c48-4e2b-8406-7c6935f8f06a' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-4539ef6f-5182-4349-999e-86f304174584' class='xr-var-data-in' type='checkbox'><label for='data-4539ef6f-5182-4349-999e-86f304174584' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>cell_measures :</span></dt><dd>area: areacella</dd><dt><span>cell_methods :</span></dt><dd>area: time: mean (interval: 1 month)</dd><dt><span>comment :</span></dt><dd>Shortwave radiation incident at the top of the atmosphere</dd><dt><span>long_name :</span></dt><dd>TOA Incident Shortwave Radiation</dd><dt><span>original_units :</span></dt><dd>W/m2</dd><dt><span>standard_name :</span></dt><dd>toa_incoming_shortwave_flux</dd><dt><span>units :</span></dt><dd>W m-2</dd></dl></div><pre class='xr-var-data'><table>
<tr>
<td>
<table>
  <thead>
    <tr><td> </td><th> Array </th><th> Chunk </th></tr>
  </thead>
  <tbody>
    <tr><th> Bytes </th><td> 1.86 GB </td> <td> 132.71 MB </td></tr>
    <tr><th> Shape </th><td> (8400, 192, 288) </td> <td> (600, 192, 288) </td></tr>
    <tr><th> Count </th><td> 15 Tasks </td><td> 14 Chunks </td></tr>
    <tr><th> Type </th><td> float32 </td><td> numpy.ndarray </td></tr>
  </tbody>
</table>
</td>
<td>
<svg width="162" height="150" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="80" y2="70" style="stroke-width:2" />
  <line x1="10" y1="29" x2="80" y2="100" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="10" y2="29" style="stroke-width:2" />
  <line x1="15" y1="5" x2="15" y2="34" />
  <line x1="20" y1="10" x2="20" y2="39" />
  <line x1="25" y1="15" x2="25" y2="44" />
  <line x1="30" y1="20" x2="30" y2="49" />
  <line x1="35" y1="25" x2="35" y2="55" />
  <line x1="40" y1="30" x2="40" y2="60" />
  <line x1="45" y1="35" x2="45" y2="65" />
  <line x1="50" y1="40" x2="50" y2="70" />
  <line x1="55" y1="45" x2="55" y2="75" />
  <line x1="60" y1="50" x2="60" y2="80" />
  <line x1="65" y1="55" x2="65" y2="85" />
  <line x1="70" y1="60" x2="70" y2="90" />
  <line x1="75" y1="65" x2="75" y2="95" />
  <line x1="80" y1="70" x2="80" y2="100" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.000000,0.000000 80.588235,70.588235 80.588235,100.379498 10.000000,29.791262" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="42" y2="0" style="stroke-width:2" />
  <line x1="15" y1="5" x2="47" y2="5" />
  <line x1="20" y1="10" x2="52" y2="10" />
  <line x1="25" y1="15" x2="57" y2="15" />
  <line x1="30" y1="20" x2="62" y2="20" />
  <line x1="35" y1="25" x2="67" y2="25" />
  <line x1="40" y1="30" x2="72" y2="30" />
  <line x1="45" y1="35" x2="77" y2="35" />
  <line x1="50" y1="40" x2="82" y2="40" />
  <line x1="55" y1="45" x2="87" y2="45" />
  <line x1="60" y1="50" x2="92" y2="50" />
  <line x1="65" y1="55" x2="97" y2="55" />
  <line x1="70" y1="60" x2="102" y2="60" />
  <line x1="75" y1="65" x2="107" y2="65" />
  <line x1="80" y1="70" x2="112" y2="70" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="80" y2="70" style="stroke-width:2" />
  <line x1="42" y1="0" x2="112" y2="70" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.000000,0.000000 42.194899,0.000000 112.783134,70.588235 80.588235,70.588235" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="80" y1="70" x2="112" y2="70" style="stroke-width:2" />
  <line x1="80" y1="100" x2="112" y2="100" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="80" y1="70" x2="80" y2="100" style="stroke-width:2" />
  <line x1="112" y1="70" x2="112" y2="100" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="80.588235,70.588235 112.783134,70.588235 112.783134,100.379498 80.588235,100.379498" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="96.685685" y="120.379498" font-size="1.0rem" font-weight="100" text-anchor="middle" >288</text>
  <text x="132.783134" y="85.483867" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,132.783134,85.483867)">192</text>
  <text x="35.294118" y="85.085380" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(45,35.294118,85.085380)">8400</text>
</svg>
</td>
</tr>
</table></pre></li><li class='xr-var-item'><div class='xr-var-name'><span>rsut</span></div><div class='xr-var-dims'>(time, lat, lon)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(600, 192, 288), meta=np.ndarray&gt;</div><input id='attrs-a7f2c01d-c3e5-4312-9b95-959d6da39972' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-a7f2c01d-c3e5-4312-9b95-959d6da39972' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d9a40d06-57e2-4fdf-8ab9-a99e879913bc' class='xr-var-data-in' type='checkbox'><label for='data-d9a40d06-57e2-4fdf-8ab9-a99e879913bc' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>cell_measures :</span></dt><dd>area: areacella</dd><dt><span>cell_methods :</span></dt><dd>area: time: mean (interval: 1 month)</dd><dt><span>comment :</span></dt><dd>at the top of the atmosphere</dd><dt><span>long_name :</span></dt><dd>TOA Outgoing Shortwave Radiation</dd><dt><span>original_units :</span></dt><dd>W/m2</dd><dt><span>standard_name :</span></dt><dd>toa_outgoing_shortwave_flux</dd><dt><span>units :</span></dt><dd>W m-2</dd></dl></div><pre class='xr-var-data'><table>
<tr>
<td>
<table>
  <thead>
    <tr><td> </td><th> Array </th><th> Chunk </th></tr>
  </thead>
  <tbody>
    <tr><th> Bytes </th><td> 1.86 GB </td> <td> 132.71 MB </td></tr>
    <tr><th> Shape </th><td> (8400, 192, 288) </td> <td> (600, 192, 288) </td></tr>
    <tr><th> Count </th><td> 15 Tasks </td><td> 14 Chunks </td></tr>
    <tr><th> Type </th><td> float32 </td><td> numpy.ndarray </td></tr>
  </tbody>
</table>
</td>
<td>
<svg width="162" height="150" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="80" y2="70" style="stroke-width:2" />
  <line x1="10" y1="29" x2="80" y2="100" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="10" y2="29" style="stroke-width:2" />
  <line x1="15" y1="5" x2="15" y2="34" />
  <line x1="20" y1="10" x2="20" y2="39" />
  <line x1="25" y1="15" x2="25" y2="44" />
  <line x1="30" y1="20" x2="30" y2="49" />
  <line x1="35" y1="25" x2="35" y2="55" />
  <line x1="40" y1="30" x2="40" y2="60" />
  <line x1="45" y1="35" x2="45" y2="65" />
  <line x1="50" y1="40" x2="50" y2="70" />
  <line x1="55" y1="45" x2="55" y2="75" />
  <line x1="60" y1="50" x2="60" y2="80" />
  <line x1="65" y1="55" x2="65" y2="85" />
  <line x1="70" y1="60" x2="70" y2="90" />
  <line x1="75" y1="65" x2="75" y2="95" />
  <line x1="80" y1="70" x2="80" y2="100" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.000000,0.000000 80.588235,70.588235 80.588235,100.379498 10.000000,29.791262" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="42" y2="0" style="stroke-width:2" />
  <line x1="15" y1="5" x2="47" y2="5" />
  <line x1="20" y1="10" x2="52" y2="10" />
  <line x1="25" y1="15" x2="57" y2="15" />
  <line x1="30" y1="20" x2="62" y2="20" />
  <line x1="35" y1="25" x2="67" y2="25" />
  <line x1="40" y1="30" x2="72" y2="30" />
  <line x1="45" y1="35" x2="77" y2="35" />
  <line x1="50" y1="40" x2="82" y2="40" />
  <line x1="55" y1="45" x2="87" y2="45" />
  <line x1="60" y1="50" x2="92" y2="50" />
  <line x1="65" y1="55" x2="97" y2="55" />
  <line x1="70" y1="60" x2="102" y2="60" />
  <line x1="75" y1="65" x2="107" y2="65" />
  <line x1="80" y1="70" x2="112" y2="70" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="80" y2="70" style="stroke-width:2" />
  <line x1="42" y1="0" x2="112" y2="70" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.000000,0.000000 42.194899,0.000000 112.783134,70.588235 80.588235,70.588235" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="80" y1="70" x2="112" y2="70" style="stroke-width:2" />
  <line x1="80" y1="100" x2="112" y2="100" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="80" y1="70" x2="80" y2="100" style="stroke-width:2" />
  <line x1="112" y1="70" x2="112" y2="100" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="80.588235,70.588235 112.783134,70.588235 112.783134,100.379498 80.588235,100.379498" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="96.685685" y="120.379498" font-size="1.0rem" font-weight="100" text-anchor="middle" >288</text>
  <text x="132.783134" y="85.483867" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,132.783134,85.483867)">192</text>
  <text x="35.294118" y="85.085380" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(45,35.294118,85.085380)">8400</text>
</svg>
</td>
</tr>
</table></pre></li><li class='xr-var-item'><div class='xr-var-name'><span>tas</span></div><div class='xr-var-dims'>(time, lat, lon)</div><div class='xr-var-dtype'>float32</div><div class='xr-var-preview xr-preview'>dask.array&lt;chunksize=(600, 192, 288), meta=np.ndarray&gt;</div><input id='attrs-9ca0b713-9736-41d7-bbbf-07350f460a38' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-9ca0b713-9736-41d7-bbbf-07350f460a38' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b5ed1b17-77d0-46e1-ae97-12026fc6f547' class='xr-var-data-in' type='checkbox'><label for='data-b5ed1b17-77d0-46e1-ae97-12026fc6f547' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>cell_measures :</span></dt><dd>area: areacella</dd><dt><span>cell_methods :</span></dt><dd>area: time: mean (interval: 1 month)</dd><dt><span>comment :</span></dt><dd>near-surface (usually, 2 meter) air temperature</dd><dt><span>long_name :</span></dt><dd>Near-Surface Air Temperature</dd><dt><span>standard_name :</span></dt><dd>air_temperature</dd><dt><span>units :</span></dt><dd>K</dd></dl></div><pre class='xr-var-data'><table>
<tr>
<td>
<table>
  <thead>
    <tr><td> </td><th> Array </th><th> Chunk </th></tr>
  </thead>
  <tbody>
    <tr><th> Bytes </th><td> 1.86 GB </td> <td> 132.71 MB </td></tr>
    <tr><th> Shape </th><td> (8400, 192, 288) </td> <td> (600, 192, 288) </td></tr>
    <tr><th> Count </th><td> 15 Tasks </td><td> 14 Chunks </td></tr>
    <tr><th> Type </th><td> float32 </td><td> numpy.ndarray </td></tr>
  </tbody>
</table>
</td>
<td>
<svg width="162" height="150" style="stroke:rgb(0,0,0);stroke-width:1" >

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="80" y2="70" style="stroke-width:2" />
  <line x1="10" y1="29" x2="80" y2="100" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="10" y2="29" style="stroke-width:2" />
  <line x1="15" y1="5" x2="15" y2="34" />
  <line x1="20" y1="10" x2="20" y2="39" />
  <line x1="25" y1="15" x2="25" y2="44" />
  <line x1="30" y1="20" x2="30" y2="49" />
  <line x1="35" y1="25" x2="35" y2="55" />
  <line x1="40" y1="30" x2="40" y2="60" />
  <line x1="45" y1="35" x2="45" y2="65" />
  <line x1="50" y1="40" x2="50" y2="70" />
  <line x1="55" y1="45" x2="55" y2="75" />
  <line x1="60" y1="50" x2="60" y2="80" />
  <line x1="65" y1="55" x2="65" y2="85" />
  <line x1="70" y1="60" x2="70" y2="90" />
  <line x1="75" y1="65" x2="75" y2="95" />
  <line x1="80" y1="70" x2="80" y2="100" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.000000,0.000000 80.588235,70.588235 80.588235,100.379498 10.000000,29.791262" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="10" y1="0" x2="42" y2="0" style="stroke-width:2" />
  <line x1="15" y1="5" x2="47" y2="5" />
  <line x1="20" y1="10" x2="52" y2="10" />
  <line x1="25" y1="15" x2="57" y2="15" />
  <line x1="30" y1="20" x2="62" y2="20" />
  <line x1="35" y1="25" x2="67" y2="25" />
  <line x1="40" y1="30" x2="72" y2="30" />
  <line x1="45" y1="35" x2="77" y2="35" />
  <line x1="50" y1="40" x2="82" y2="40" />
  <line x1="55" y1="45" x2="87" y2="45" />
  <line x1="60" y1="50" x2="92" y2="50" />
  <line x1="65" y1="55" x2="97" y2="55" />
  <line x1="70" y1="60" x2="102" y2="60" />
  <line x1="75" y1="65" x2="107" y2="65" />
  <line x1="80" y1="70" x2="112" y2="70" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="10" y1="0" x2="80" y2="70" style="stroke-width:2" />
  <line x1="42" y1="0" x2="112" y2="70" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="10.000000,0.000000 42.194899,0.000000 112.783134,70.588235 80.588235,70.588235" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Horizontal lines -->
  <line x1="80" y1="70" x2="112" y2="70" style="stroke-width:2" />
  <line x1="80" y1="100" x2="112" y2="100" style="stroke-width:2" />

  <!-- Vertical lines -->
  <line x1="80" y1="70" x2="80" y2="100" style="stroke-width:2" />
  <line x1="112" y1="70" x2="112" y2="100" style="stroke-width:2" />

  <!-- Colored Rectangle -->
  <polygon points="80.588235,70.588235 112.783134,70.588235 112.783134,100.379498 80.588235,100.379498" style="fill:#ECB172A0;stroke-width:0"/>

  <!-- Text -->
  <text x="96.685685" y="120.379498" font-size="1.0rem" font-weight="100" text-anchor="middle" >288</text>
  <text x="132.783134" y="85.483867" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(-90,132.783134,85.483867)">192</text>
  <text x="35.294118" y="85.085380" font-size="1.0rem" font-weight="100" text-anchor="middle" transform="rotate(45,35.294118,85.085380)">8400</text>
</svg>
</td>
</tr>
</table></pre></li></ul></div></li><li class='xr-section-item'><input id='section-58fcee68-00b6-4430-b25f-5455e66dde3c' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-58fcee68-00b6-4430-b25f-5455e66dde3c' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div>
</div>
<p>Now use dask to do this in parallel on all of the datasets:</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dsets_</span> <span class="o">=</span> <span class="n">dask</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">dsets</span><span class="p">))[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="Reduce-Data-via-Global-Mean">
<h2>Reduce Data via Global Mean<a class="headerlink" href="#Reduce-Data-via-Global-Mean" title="Permalink to this headline">¶</a></h2>
<p>We don’t want to load all of the raw model data into memory right away. Instead, we want to reduce the data by taking the global mean. We need to remember to weight this global mean by a factor proportional to <code class="docutils literal notranslate"><span class="pre">cos(lat)</span></code>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[11]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="k">def</span> <span class="nf">get_lat_name</span><span class="p">(</span><span class="n">ds</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Figure out what is the latitude coordinate for each dataset.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">lat_name</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="s1">&#39;latitude&#39;</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">lat_name</span> <span class="ow">in</span> <span class="n">ds</span><span class="o">.</span><span class="n">coords</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">lat_name</span>
    <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Couldn&#39;t find a latitude coordinate&quot;</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">global_mean</span><span class="p">(</span><span class="n">ds</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Return global mean of a whole dataset.&quot;&quot;&quot;</span>
    <span class="n">lat</span> <span class="o">=</span> <span class="n">ds</span><span class="p">[</span><span class="n">get_lat_name</span><span class="p">(</span><span class="n">ds</span><span class="p">)]</span>
    <span class="n">weight</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">cos</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">deg2rad</span><span class="p">(</span><span class="n">lat</span><span class="p">))</span>
    <span class="n">weight</span> <span class="o">/=</span> <span class="n">weight</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="n">other_dims</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">dims</span><span class="p">)</span> <span class="o">-</span> <span class="p">{</span><span class="s1">&#39;time&#39;</span><span class="p">}</span>
    <span class="k">return</span> <span class="p">(</span><span class="n">ds</span> <span class="o">*</span> <span class="n">weight</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">other_dims</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>We now apply this function, plus resampling to annual mean data, to all of the datasets. We also concatenate the experiments together into a single Dataset for each model. This is the most complex cell in the notebook. A lot is happening here.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[12]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">expts</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;piControl&#39;</span><span class="p">,</span> <span class="s1">&#39;abrupt-4xCO2&#39;</span><span class="p">]</span>
<span class="n">expt_da</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span><span class="p">(</span><span class="n">expts</span><span class="p">,</span> <span class="n">dims</span><span class="o">=</span><span class="s1">&#39;experiment_id&#39;</span><span class="p">,</span>
                       <span class="n">coords</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;experiment_id&#39;</span><span class="p">:</span> <span class="n">expts</span><span class="p">})</span>

<span class="n">dsets_aligned</span> <span class="o">=</span> <span class="p">{}</span>

<span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">dsets_</span><span class="o">.</span><span class="n">items</span><span class="p">()):</span>
    <span class="n">expt_dsets</span> <span class="o">=</span> <span class="n">v</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">any</span><span class="p">([</span><span class="n">d</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="n">expt_dsets</span><span class="p">]):</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Missing experiment for </span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">continue</span>

    <span class="k">for</span> <span class="n">ds</span> <span class="ow">in</span> <span class="n">expt_dsets</span><span class="p">:</span>
        <span class="n">ds</span><span class="o">.</span><span class="n">coords</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span> <span class="o">-</span> <span class="n">ds</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">year</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="c1"># workaround for</span>
    <span class="c1"># https://github.com/pydata/xarray/issues/2237#issuecomment-620961663</span>
    <span class="n">dsets_ann_mean</span> <span class="o">=</span> <span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="n">expt</span><span class="p">]</span><span class="o">.</span><span class="n">pipe</span><span class="p">(</span><span class="n">global_mean</span><span class="p">)</span>
                             <span class="o">.</span><span class="n">swap_dims</span><span class="p">({</span><span class="s1">&#39;time&#39;</span><span class="p">:</span> <span class="s1">&#39;year&#39;</span><span class="p">})</span>
                             <span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;time&#39;</span><span class="p">)</span>
                             <span class="o">.</span><span class="n">coarsen</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
                      <span class="k">for</span> <span class="n">expt</span> <span class="ow">in</span> <span class="n">expts</span><span class="p">]</span>

    <span class="c1"># align everything with the 4xCO2 experiment</span>
    <span class="n">dsets_aligned</span><span class="p">[</span><span class="n">k</span><span class="p">]</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">concat</span><span class="p">(</span><span class="n">dsets_ann_mean</span><span class="p">,</span> <span class="n">join</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">,</span>
                                 <span class="n">dim</span><span class="o">=</span><span class="n">expt_da</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "371eee66faa4477aabddc6fa34fea67e", "version_major": 2, "version_minor": 0}</script></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Missing experiment for E3SM-1-0
Missing experiment for IPSL-CM6A-LR
Missing experiment for KACE-1-0-G
Missing experiment for NESM3

</pre></div></div>
</div>
</div>
<div class="section" id="Do-the-Computation">
<h2>Do the Computation<a class="headerlink" href="#Do-the-Computation" title="Permalink to this headline">¶</a></h2>
<p>Up to this point, no computations have actually happened. Everything has been “lazy”. Now we trigger the computation to actual occur and load the global / annual mean data into memory.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[13]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">dsets_aligned_</span> <span class="o">=</span> <span class="n">dask</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="n">dsets_aligned</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
<p>Now we concatenate across models to produce one big dataset with all the required variables.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">source_ids</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">dsets_aligned_</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
<span class="n">source_da</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span><span class="p">(</span><span class="n">source_ids</span><span class="p">,</span> <span class="n">dims</span><span class="o">=</span><span class="s1">&#39;source_id&#39;</span><span class="p">,</span>
                         <span class="n">coords</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;source_id&#39;</span><span class="p">:</span> <span class="n">source_ids</span><span class="p">})</span>

<span class="n">big_ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">ds</span><span class="o">.</span><span class="n">reset_coords</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">ds</span> <span class="ow">in</span> <span class="n">dsets_aligned_</span><span class="o">.</span><span class="n">values</span><span class="p">()],</span>
                   <span class="n">dim</span><span class="o">=</span><span class="n">source_da</span><span class="p">)</span>
<span class="n">big_ds</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[14]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<title>Show/Hide data repr</title>
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<title>Show/Hide attributes</title>
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

.xr-wrap {
  min-width: 300px;
  max-width: 700px;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt, dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><div class='xr-wrap'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-b2d951d0-6501-4854-a59a-fabde1ad6a5f' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-b2d951d0-6501-4854-a59a-fabde1ad6a5f' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>experiment_id</span>: 2</li><li><span class='xr-has-index'>source_id</span>: 18</li><li><span class='xr-has-index'>year</span>: 999</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-af810113-6293-46a5-9094-ebea1398c4ab' class='xr-section-summary-in' type='checkbox'  checked><label for='section-af810113-6293-46a5-9094-ebea1398c4ab' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>source_id</span></div><div class='xr-var-dims'>(source_id)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;ACCESS-CM2&#x27; ... &#x27;SAM0-UNICON&#x27;</div><input id='attrs-53fb38ca-5181-4c33-8026-59cdc7ca4255' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-53fb38ca-5181-4c33-8026-59cdc7ca4255' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-7514f98b-7df5-4d38-ba3e-265ef8f59607' class='xr-var-data-in' type='checkbox'><label for='data-7514f98b-7df5-4d38-ba3e-265ef8f59607' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><pre class='xr-var-data'>array([&#x27;ACCESS-CM2&#x27;, &#x27;ACCESS-ESM1-5&#x27;, &#x27;BCC-CSM2-MR&#x27;, &#x27;BCC-ESM1&#x27;, &#x27;CAMS-CSM1-0&#x27;,
       &#x27;CESM2&#x27;, &#x27;CESM2-WACCM&#x27;, &#x27;CanESM5&#x27;, &#x27;EC-Earth3-Veg&#x27;, &#x27;GFDL-CM4&#x27;,
       &#x27;GFDL-ESM4&#x27;, &#x27;GISS-E2-1-G&#x27;, &#x27;GISS-E2-1-H&#x27;, &#x27;INM-CM4-8&#x27;, &#x27;MIROC6&#x27;,
       &#x27;MPI-ESM1-2-HR&#x27;, &#x27;MRI-ESM2-0&#x27;, &#x27;SAM0-UNICON&#x27;], dtype=object)</pre></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>experiment_id</span></div><div class='xr-var-dims'>(experiment_id)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;piControl&#x27; &#x27;abrupt-4xCO2&#x27;</div><input id='attrs-a5f5d3be-0d06-4f80-a243-08980fe72109' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-a5f5d3be-0d06-4f80-a243-08980fe72109' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-0915c17c-ecbf-4ae0-82a5-10bc934a30f5' class='xr-var-data-in' type='checkbox'><label for='data-0915c17c-ecbf-4ae0-82a5-10bc934a30f5' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><pre class='xr-var-data'>array([&#x27;piControl&#x27;, &#x27;abrupt-4xCO2&#x27;], dtype=object)</pre></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>year</span></div><div class='xr-var-dims'>(year)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 1.0 2.0 ... 996.0 997.0 998.0</div><input id='attrs-3cd267fb-8818-4eeb-b952-8e4a8547f8d4' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-3cd267fb-8818-4eeb-b952-8e4a8547f8d4' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-65a38684-7d9d-4025-8997-bcec67dab741' class='xr-var-data-in' type='checkbox'><label for='data-65a38684-7d9d-4025-8997-bcec67dab741' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><pre class='xr-var-data'>array([  0.,   1.,   2., ..., 996., 997., 998.])</pre></li></ul></div></li><li class='xr-section-item'><input id='section-1540b4b2-832a-4942-a63c-bf3f9f6092a9' class='xr-section-summary-in' type='checkbox'  checked><label for='section-1540b4b2-832a-4942-a63c-bf3f9f6092a9' class='xr-section-summary' >Data variables: <span>(5)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>rlut</span></div><div class='xr-var-dims'>(source_id, experiment_id, year)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>242.2 242.0 242.2 ... nan nan nan</div><input id='attrs-2bdf1042-5870-49f9-99bf-313d2b82312f' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-2bdf1042-5870-49f9-99bf-313d2b82312f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-a8bff918-fbd8-489d-915a-b2ae1171bf27' class='xr-var-data-in' type='checkbox'><label for='data-a8bff918-fbd8-489d-915a-b2ae1171bf27' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><pre class='xr-var-data'>array([[[242.1531882 , 242.03535435, 242.19435088, ...,          nan,
                  nan,          nan],
        [237.84149141, 240.37242666, 241.2120226 , ...,          nan,
                  nan,          nan]],

       [[244.70193143, 245.31180089, 245.31419418, ...,          nan,
                  nan,          nan],
        [240.66729217, 242.41553496, 243.44455669, ...,          nan,
                  nan,          nan]],

       [[239.52768902, 239.61488333, 239.38228362, ...,          nan,
                  nan,          nan],
        [234.96249484, 236.12723693, 237.03915258, ...,          nan,
                  nan,          nan]],

       ...,

       [[241.72672971, 241.90418075, 241.85457361, ...,          nan,
                  nan,          nan],
        [236.35981537, 237.58814585, 238.16692975, ...,          nan,
                  nan,          nan]],

       [[241.70191145, 241.46380205, 241.5131782 , ...,          nan,
                  nan,          nan],
        [237.38398159, 238.60044766, 239.68343292, ...,          nan,
                  nan,          nan]],

       [[239.73369905, 239.78533033, 239.3032221 , ...,          nan,
                  nan,          nan],
        [233.5199945 , 235.74675419, 237.06011175, ...,          nan,
                  nan,          nan]]])</pre></li><li class='xr-var-item'><div class='xr-var-name'><span>rsdt</span></div><div class='xr-var-dims'>(source_id, experiment_id, year)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>340.4 340.4 340.4 ... nan nan nan</div><input id='attrs-382968c0-9b25-40ff-be19-b54b67796b36' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-382968c0-9b25-40ff-be19-b54b67796b36' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-2fb1fa08-4a5b-499c-9c5a-f024b2aac102' class='xr-var-data-in' type='checkbox'><label for='data-2fb1fa08-4a5b-499c-9c5a-f024b2aac102' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><pre class='xr-var-data'>array([[[340.36208408, 340.36208408, 340.37045763, ...,          nan,
                  nan,          nan],
        [340.36208408, 340.36208408, 340.37045763, ...,          nan,
                  nan,          nan]],

       [[341.59849936, 341.59849936, 341.59849936, ...,          nan,
                  nan,          nan],
        [341.59849936, 341.59849936, 341.59849936, ...,          nan,
                  nan,          nan]],

       [[338.2229232 , 338.22294514, 338.22292782, ...,          nan,
                  nan,          nan],
        [338.1955409 , 338.19548759, 338.195451  , ...,          nan,
                  nan,          nan]],

       ...,

       [[340.26384093, 340.26384093, 340.25740736, ...,          nan,
                  nan,          nan],
        [340.26384093, 340.26384093, 340.25740736, ...,          nan,
                  nan,          nan]],

       [[340.254947  , 340.254947  , 340.2640629 , ...,          nan,
                  nan,          nan],
        [340.254947  , 340.254947  , 340.2640629 , ...,          nan,
                  nan,          nan]],

       [[340.25594501, 340.25594503, 340.25594503, ...,          nan,
                  nan,          nan],
        [340.25594501, 340.25594503, 340.25594503, ...,          nan,
                  nan,          nan]]])</pre></li><li class='xr-var-item'><div class='xr-var-name'><span>rsut</span></div><div class='xr-var-dims'>(source_id, experiment_id, year)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>97.84 97.84 97.72 ... nan nan nan</div><input id='attrs-5ad3accd-b9d5-46c0-a845-9e35e10ae5dc' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-5ad3accd-b9d5-46c0-a845-9e35e10ae5dc' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-ee7b55ab-3549-4e2e-9b8c-a8a4fdccb595' class='xr-var-data-in' type='checkbox'><label for='data-ee7b55ab-3549-4e2e-9b8c-a8a4fdccb595' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><pre class='xr-var-data'>array([[[97.83618435, 97.83881778, 97.72420607, ...,         nan,
                 nan,         nan],
        [94.71758801, 93.55442598, 93.46030249, ...,         nan,
                 nan,         nan]],

       [[96.73544491, 96.28390485, 96.61879237, ...,         nan,
                 nan,         nan],
        [94.69104059, 94.0132486 , 93.90088584, ...,         nan,
                 nan,         nan]],

       [[99.20337278, 99.54315974, 99.30149975, ...,         nan,
                 nan,         nan],
        [97.74295804, 97.5445598 , 97.65779354, ...,         nan,
                 nan,         nan]],

       ...,

       [[97.88936023, 97.97532352, 98.5285457 , ...,         nan,
                 nan,         nan],
        [97.00522736, 97.04346891, 96.92445902, ...,         nan,
                 nan,         nan]],

       [[98.00645259, 97.99298826, 98.13119018, ...,         nan,
                 nan,         nan],
        [95.18825923, 95.30182086, 95.55589322, ...,         nan,
                 nan,         nan]],

       [[99.09339986, 99.23626883, 99.00812923, ...,         nan,
                 nan,         nan],
        [97.31173828, 95.99819253, 96.20814592, ...,         nan,
                 nan,         nan]]])</pre></li><li class='xr-var-item'><div class='xr-var-name'><span>tas</span></div><div class='xr-var-dims'>(source_id, experiment_id, year)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>287.0 287.0 287.1 ... nan nan nan</div><input id='attrs-acb12e76-247a-4827-88a9-44620f6149ed' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-acb12e76-247a-4827-88a9-44620f6149ed' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f3200207-2bc9-4551-9402-cac18c9dadb8' class='xr-var-data-in' type='checkbox'><label for='data-f3200207-2bc9-4551-9402-cac18c9dadb8' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><pre class='xr-var-data'>array([[[286.97130316, 287.01273733, 287.05322668, ...,          nan,
                  nan,          nan],
        [288.08007778, 289.02285565, 289.33196392, ...,          nan,
                  nan,          nan]],

       [[287.4538212 , 287.59293088, 287.66311038, ...,          nan,
                  nan,          nan],
        [288.39745905, 289.16965483, 289.61736708, ...,          nan,
                  nan,          nan]],

       [[287.46056461, 287.43875003, 287.43172222, ...,          nan,
                  nan,          nan],
        [288.57987058, 289.17035562, 289.60579664, ...,          nan,
                  nan,          nan]],

       ...,

       [[287.11199722, 287.18640383, 287.16844145, ...,          nan,
                  nan,          nan],
        [288.33362669, 288.93949635, 289.38950307, ...,          nan,
                  nan,          nan]],

       [[286.90136665, 286.87541207, 286.83983702, ...,          nan,
                  nan,          nan],
        [288.01487551, 288.6603959 , 289.01230291, ...,          nan,
                  nan,          nan]],

       [[286.44398785, 286.45580714, 286.35515818, ...,          nan,
                  nan,          nan],
        [287.16584815, 288.11511453, 288.53517771, ...,          nan,
                  nan,          nan]]])</pre></li><li class='xr-var-item'><div class='xr-var-name'><span>None</span></div><div class='xr-var-dims'>(source_id)</div><div class='xr-var-dtype'>&lt;U13</div><div class='xr-var-preview xr-preview'>&#x27;ACCESS-CM2&#x27; ... &#x27;SAM0-UNICON&#x27;</div><input id='attrs-b1035ca6-c8c6-4084-8162-01ac5f57a7a9' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-b1035ca6-c8c6-4084-8162-01ac5f57a7a9' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-83fc3e88-d7be-4bec-bdce-f00416c02349' class='xr-var-data-in' type='checkbox'><label for='data-83fc3e88-d7be-4bec-bdce-f00416c02349' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><pre class='xr-var-data'>array([&#x27;ACCESS-CM2&#x27;, &#x27;ACCESS-ESM1-5&#x27;, &#x27;BCC-CSM2-MR&#x27;, &#x27;BCC-ESM1&#x27;,
       &#x27;CAMS-CSM1-0&#x27;, &#x27;CESM2&#x27;, &#x27;CESM2-WACCM&#x27;, &#x27;CanESM5&#x27;, &#x27;EC-Earth3-Veg&#x27;,
       &#x27;GFDL-CM4&#x27;, &#x27;GFDL-ESM4&#x27;, &#x27;GISS-E2-1-G&#x27;, &#x27;GISS-E2-1-H&#x27;, &#x27;INM-CM4-8&#x27;,
       &#x27;MIROC6&#x27;, &#x27;MPI-ESM1-2-HR&#x27;, &#x27;MRI-ESM2-0&#x27;, &#x27;SAM0-UNICON&#x27;],
      dtype=&#x27;&lt;U13&#x27;)</pre></li></ul></div></li><li class='xr-section-item'><input id='section-37851dc1-fe80-4c21-8f29-799a4839479e' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-37851dc1-fe80-4c21-8f29-799a4839479e' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div>
</div>
</div>
<div class="section" id="Calculated-Derived-Variables">
<h2>Calculated Derived Variables<a class="headerlink" href="#Calculated-Derived-Variables" title="Permalink to this headline">¶</a></h2>
<p>We need to calculate the net radiative imbalance, plus the anomaly of the abrupt 4xCO2 run compared to the piControl run.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">big_ds</span><span class="p">[</span><span class="s1">&#39;imbalance&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">big_ds</span><span class="p">[</span><span class="s1">&#39;rsdt&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">big_ds</span><span class="p">[</span><span class="s1">&#39;rsut&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">big_ds</span><span class="p">[</span><span class="s1">&#39;rlut&#39;</span><span class="p">]</span>

<span class="n">ds_mean</span> <span class="o">=</span> <span class="n">big_ds</span><span class="p">[[</span><span class="s1">&#39;tas&#39;</span><span class="p">,</span> <span class="s1">&#39;imbalance&#39;</span><span class="p">]]</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">experiment_id</span><span class="o">=</span><span class="s1">&#39;piControl&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">dim</span><span class="o">=</span><span class="s1">&#39;year&#39;</span><span class="p">)</span>
<span class="n">ds_anom</span> <span class="o">=</span> <span class="n">big_ds</span><span class="p">[[</span><span class="s1">&#39;tas&#39;</span><span class="p">,</span> <span class="s1">&#39;imbalance&#39;</span><span class="p">]]</span> <span class="o">-</span> <span class="n">ds_mean</span>

<span class="c1"># add some metadata</span>
<span class="n">ds_anom</span><span class="o">.</span><span class="n">tas</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;long_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Global Mean Surface Temp Anom&#39;</span>
<span class="n">ds_anom</span><span class="o">.</span><span class="n">tas</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;units&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;K&#39;</span>
<span class="n">ds_anom</span><span class="o">.</span><span class="n">imbalance</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;long_name&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;Global Mean Radiative Imbalance&#39;</span>
<span class="n">ds_anom</span><span class="o">.</span><span class="n">imbalance</span><span class="o">.</span><span class="n">attrs</span><span class="p">[</span><span class="s1">&#39;units&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;W m$^{-2}$&#39;</span>

<span class="n">ds_anom</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[15]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<title>Show/Hide data repr</title>
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<title>Show/Hide attributes</title>
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

.xr-wrap {
  min-width: 300px;
  max-width: 700px;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt, dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><div class='xr-wrap'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-a1654b33-ef01-4f65-b55f-1d3e1084966a' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-a1654b33-ef01-4f65-b55f-1d3e1084966a' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>experiment_id</span>: 2</li><li><span class='xr-has-index'>source_id</span>: 18</li><li><span class='xr-has-index'>year</span>: 999</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-7606fcf4-6489-482f-9bf9-02b2c49303b3' class='xr-section-summary-in' type='checkbox'  checked><label for='section-7606fcf4-6489-482f-9bf9-02b2c49303b3' class='xr-section-summary' >Coordinates: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>source_id</span></div><div class='xr-var-dims'>(source_id)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;ACCESS-CM2&#x27; ... &#x27;SAM0-UNICON&#x27;</div><input id='attrs-4d48de3a-c9a3-4dd2-88d3-eb8fb6eaedd9' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-4d48de3a-c9a3-4dd2-88d3-eb8fb6eaedd9' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-20865a6f-5a83-48ad-9c5b-1a44cc6abc33' class='xr-var-data-in' type='checkbox'><label for='data-20865a6f-5a83-48ad-9c5b-1a44cc6abc33' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><pre class='xr-var-data'>array([&#x27;ACCESS-CM2&#x27;, &#x27;ACCESS-ESM1-5&#x27;, &#x27;BCC-CSM2-MR&#x27;, &#x27;BCC-ESM1&#x27;, &#x27;CAMS-CSM1-0&#x27;,
       &#x27;CESM2&#x27;, &#x27;CESM2-WACCM&#x27;, &#x27;CanESM5&#x27;, &#x27;EC-Earth3-Veg&#x27;, &#x27;GFDL-CM4&#x27;,
       &#x27;GFDL-ESM4&#x27;, &#x27;GISS-E2-1-G&#x27;, &#x27;GISS-E2-1-H&#x27;, &#x27;INM-CM4-8&#x27;, &#x27;MIROC6&#x27;,
       &#x27;MPI-ESM1-2-HR&#x27;, &#x27;MRI-ESM2-0&#x27;, &#x27;SAM0-UNICON&#x27;], dtype=object)</pre></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>experiment_id</span></div><div class='xr-var-dims'>(experiment_id)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;piControl&#x27; &#x27;abrupt-4xCO2&#x27;</div><input id='attrs-5d17a486-0d76-41ed-b9cc-1f41af8fe04d' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-5d17a486-0d76-41ed-b9cc-1f41af8fe04d' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-3c9c09b3-804a-4415-ad0e-6d666fdfe3ce' class='xr-var-data-in' type='checkbox'><label for='data-3c9c09b3-804a-4415-ad0e-6d666fdfe3ce' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><pre class='xr-var-data'>array([&#x27;piControl&#x27;, &#x27;abrupt-4xCO2&#x27;], dtype=object)</pre></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>year</span></div><div class='xr-var-dims'>(year)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 1.0 2.0 ... 996.0 997.0 998.0</div><input id='attrs-1a024afd-ec8a-4a99-8ccc-c245603cf39c' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-1a024afd-ec8a-4a99-8ccc-c245603cf39c' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-684db943-47ef-4c9b-8a3a-315e990c8a54' class='xr-var-data-in' type='checkbox'><label for='data-684db943-47ef-4c9b-8a3a-315e990c8a54' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><pre class='xr-var-data'>array([  0.,   1.,   2., ..., 996., 997., 998.])</pre></li></ul></div></li><li class='xr-section-item'><input id='section-79f10dd7-8fa2-4522-ac02-88741c4e6df7' class='xr-section-summary-in' type='checkbox'  checked><label for='section-79f10dd7-8fa2-4522-ac02-88741c4e6df7' class='xr-section-summary' >Data variables: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>tas</span></div><div class='xr-var-dims'>(source_id, experiment_id, year)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-0.03737 0.004069 ... nan nan</div><input id='attrs-926faa0e-3ab6-4a54-a184-59d9014e6703' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-926faa0e-3ab6-4a54-a184-59d9014e6703' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-d54d87dc-baf7-484a-96dc-2b279c947263' class='xr-var-data-in' type='checkbox'><label for='data-d54d87dc-baf7-484a-96dc-2b279c947263' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Global Mean Surface Temp Anom</dd><dt><span>units :</span></dt><dd>K</dd></dl></div><pre class='xr-var-data'>array([[[-0.03736524,  0.00406893,  0.04455828, ...,         nan,
                 nan,         nan],
        [ 1.07140938,  2.01418725,  2.32329552, ...,         nan,
                 nan,         nan]],

       [[-0.16733461, -0.02822493,  0.04195457, ...,         nan,
                 nan,         nan],
        [ 0.77630324,  1.54849902,  1.99621127, ...,         nan,
                 nan,         nan]],

       [[-0.11410862, -0.13592319, -0.142951  , ...,         nan,
                 nan,         nan],
        [ 1.00519735,  1.5956824 ,  2.03112341, ...,         nan,
                 nan,         nan]],

       ...,

       [[ 0.00326024,  0.07766685,  0.05970447, ...,         nan,
                 nan,         nan],
        [ 1.22488971,  1.83075937,  2.28076608, ...,         nan,
                 nan,         nan]],

       [[-0.0086573 , -0.03461188, -0.07018693, ...,         nan,
                 nan,         nan],
        [ 1.10485156,  1.75037195,  2.10227896, ...,         nan,
                 nan,         nan]],

       [[ 0.13586615,  0.14768545,  0.04703649, ...,         nan,
                 nan,         nan],
        [ 0.85772646,  1.80699284,  2.22705602, ...,         nan,
                 nan,         nan]]])</pre></li><li class='xr-var-item'><div class='xr-var-name'><span>imbalance</span></div><div class='xr-var-dims'>(source_id, experiment_id, year)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>-0.04809 0.06711 0.0311 ... nan nan</div><input id='attrs-d2dc5b51-8d38-48e8-ad10-146a60a4fac0' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-d2dc5b51-8d38-48e8-ad10-146a60a4fac0' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f2003c79-90a7-43bb-bef6-9c237deeedb9' class='xr-var-data-in' type='checkbox'><label for='data-f2003c79-90a7-43bb-bef6-9c237deeedb9' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Global Mean Radiative Imbalance</dd><dt><span>units :</span></dt><dd>W m$^{-2}$</dd></dl></div><pre class='xr-var-data'>array([[[-4.80920296e-02,  6.71083887e-02,  3.10971172e-02, ...,
                     nan,             nan,             nan],
        [ 7.38220110e+00,  6.01442788e+00,  5.27732898e+00, ...,
                     nan,             nan,             nan]],

       [[ 3.48665834e-01,  1.90336447e-01, -1.46944366e-01, ...,
                     nan,             nan,             nan],
        [ 6.42770942e+00,  5.35725862e+00,  4.44059965e+00, ...,
                     nan,             nan,             nan]],

       [[-4.12819588e-03, -4.31087521e-01,  4.31548549e-02, ...,
                     nan,             nan,             nan],
        [ 5.99409842e+00,  5.02770126e+00,  4.00251529e+00, ...,
                     nan,             nan,             nan]],

       ...,

       [[ 4.15586499e-01,  1.52172166e-01, -3.57876439e-01, ...,
                     nan,             nan,             nan],
        [ 6.66663372e+00,  5.40006168e+00,  4.93385410e+00, ...,
                     nan,             nan,             nan]],

       [[-4.16292252e-01, -1.64718512e-01, -3.43180689e-01, ...,
                     nan,             nan,             nan],
        [ 6.71983098e+00,  5.38980328e+00,  4.06186154e+00, ...,
                     nan,             nan,             nan]],

       [[-3.62023320e-01, -5.56523557e-01,  1.53724282e-01, ...,
                     nan,             nan,             nan],
        [ 7.63334280e+00,  6.72012888e+00,  5.19681795e+00, ...,
                     nan,             nan,             nan]]])</pre></li></ul></div></li><li class='xr-section-item'><input id='section-3925c9a7-b5cb-49a5-928e-ec5e6a46818c' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-3925c9a7-b5cb-49a5-928e-ec5e6a46818c' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div>
</div>
</div>
<div class="section" id="Plot-Timeseries">
<h2>Plot Timeseries<a class="headerlink" href="#Plot-Timeseries" title="Permalink to this headline">¶</a></h2>
<p>Here we plot the global mean surface temperature for each model:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ds_anom</span><span class="o">.</span><span class="n">tas</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">col</span><span class="o">=</span><span class="s1">&#39;source_id&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="n">col_wrap</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[16]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;xarray.plot.facetgrid.FacetGrid at 0x7f823466f110&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/repos_pangeo-gallery_cmip6_ECS_Gregory_method_33_1.png" class="no-scaled-link" src="../../../_images/repos_pangeo-gallery_cmip6_ECS_Gregory_method_33_1.png" style="width: 1250px; height: 855px;" />
</div>
</div>
<p>We can see that the models cover different time intervals. Let’s limit the rest of our analysis to the first 150 years.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># limit to the gregory 150-year period</span>
<span class="n">first_150_years</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">149</span><span class="p">)</span>
<span class="n">ds_anom</span><span class="o">.</span><span class="n">tas</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="n">first_150_years</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">col</span><span class="o">=</span><span class="s1">&#39;source_id&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="n">col_wrap</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[17]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;xarray.plot.facetgrid.FacetGrid at 0x7f8236178e10&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/repos_pangeo-gallery_cmip6_ECS_Gregory_method_35_1.png" class="no-scaled-link" src="../../../_images/repos_pangeo-gallery_cmip6_ECS_Gregory_method_35_1.png" style="width: 1250px; height: 855px;" />
</div>
</div>
<p>Same thing for radiative imbalance.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ds_anom</span><span class="o">.</span><span class="n">imbalance</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="n">first_150_years</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">line</span><span class="p">(</span><span class="n">col</span><span class="o">=</span><span class="s1">&#39;source_id&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;year&#39;</span><span class="p">,</span> <span class="n">col_wrap</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[18]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;xarray.plot.facetgrid.FacetGrid at 0x7f8233ef3650&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/repos_pangeo-gallery_cmip6_ECS_Gregory_method_37_1.png" class="no-scaled-link" src="../../../_images/repos_pangeo-gallery_cmip6_ECS_Gregory_method_37_1.png" style="width: 1246px; height: 855px;" />
</div>
</div>
</div>
<div class="section" id="Calculate-ECS">
<h2>Calculate ECS<a class="headerlink" href="#Calculate-ECS" title="Permalink to this headline">¶</a></h2>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ds_abrupt</span> <span class="o">=</span> <span class="n">ds_anom</span><span class="o">.</span><span class="n">sel</span><span class="p">(</span><span class="n">year</span><span class="o">=</span><span class="n">first_150_years</span><span class="p">,</span> <span class="n">experiment_id</span><span class="o">=</span><span class="s1">&#39;abrupt-4xCO2&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">reset_coords</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">calc_ecs</span><span class="p">(</span><span class="n">ds</span><span class="p">):</span>
    <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">tas</span><span class="p">,</span> <span class="n">ds</span><span class="o">.</span><span class="n">imbalance</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">ecs</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.5</span> <span class="o">*</span> <span class="p">(</span><span class="n">b</span><span class="o">/</span><span class="n">a</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span><span class="p">(</span><span class="n">ecs</span><span class="p">)</span>

<span class="n">ds_abrupt</span><span class="p">[</span><span class="s1">&#39;ecs&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">ds_abrupt</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;source_id&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">calc_ecs</span><span class="p">)</span>
<span class="n">ds_abrupt</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[19]:
</pre></div>
</div>
<div class="output_area rendered_html docutils container">
<div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<title>Show/Hide data repr</title>
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<title>Show/Hide attributes</title>
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

.xr-wrap {
  min-width: 300px;
  max-width: 700px;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt, dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2 {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><div class='xr-wrap'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-83edcbcb-35af-4435-8bed-b40337efe92b' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-83edcbcb-35af-4435-8bed-b40337efe92b' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>source_id</span>: 18</li><li><span class='xr-has-index'>year</span>: 150</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-47a4e6fc-752d-4502-8d85-72222fa91a90' class='xr-section-summary-in' type='checkbox'  checked><label for='section-47a4e6fc-752d-4502-8d85-72222fa91a90' class='xr-section-summary' >Coordinates: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>source_id</span></div><div class='xr-var-dims'>(source_id)</div><div class='xr-var-dtype'>object</div><div class='xr-var-preview xr-preview'>&#x27;ACCESS-CM2&#x27; ... &#x27;SAM0-UNICON&#x27;</div><input id='attrs-d4c20bb7-d3f2-41e5-973c-794b1ea0ee02' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-d4c20bb7-d3f2-41e5-973c-794b1ea0ee02' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b349a856-24f4-4ab1-a336-04febeb28762' class='xr-var-data-in' type='checkbox'><label for='data-b349a856-24f4-4ab1-a336-04febeb28762' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><pre class='xr-var-data'>array([&#x27;ACCESS-CM2&#x27;, &#x27;ACCESS-ESM1-5&#x27;, &#x27;BCC-CSM2-MR&#x27;, &#x27;BCC-ESM1&#x27;, &#x27;CAMS-CSM1-0&#x27;,
       &#x27;CESM2&#x27;, &#x27;CESM2-WACCM&#x27;, &#x27;CanESM5&#x27;, &#x27;EC-Earth3-Veg&#x27;, &#x27;GFDL-CM4&#x27;,
       &#x27;GFDL-ESM4&#x27;, &#x27;GISS-E2-1-G&#x27;, &#x27;GISS-E2-1-H&#x27;, &#x27;INM-CM4-8&#x27;, &#x27;MIROC6&#x27;,
       &#x27;MPI-ESM1-2-HR&#x27;, &#x27;MRI-ESM2-0&#x27;, &#x27;SAM0-UNICON&#x27;], dtype=object)</pre></li><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>year</span></div><div class='xr-var-dims'>(year)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>0.0 1.0 2.0 ... 147.0 148.0 149.0</div><input id='attrs-8e701051-d05c-4378-a84f-dde24143b752' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-8e701051-d05c-4378-a84f-dde24143b752' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-0f910c34-da1f-4e92-a011-9373f73c4931' class='xr-var-data-in' type='checkbox'><label for='data-0f910c34-da1f-4e92-a011-9373f73c4931' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><pre class='xr-var-data'>array([  0.,   1.,   2.,   3.,   4.,   5.,   6.,   7.,   8.,   9.,  10.,  11.,
        12.,  13.,  14.,  15.,  16.,  17.,  18.,  19.,  20.,  21.,  22.,  23.,
        24.,  25.,  26.,  27.,  28.,  29.,  30.,  31.,  32.,  33.,  34.,  35.,
        36.,  37.,  38.,  39.,  40.,  41.,  42.,  43.,  44.,  45.,  46.,  47.,
        48.,  49.,  50.,  51.,  52.,  53.,  54.,  55.,  56.,  57.,  58.,  59.,
        60.,  61.,  62.,  63.,  64.,  65.,  66.,  67.,  68.,  69.,  70.,  71.,
        72.,  73.,  74.,  75.,  76.,  77.,  78.,  79.,  80.,  81.,  82.,  83.,
        84.,  85.,  86.,  87.,  88.,  89.,  90.,  91.,  92.,  93.,  94.,  95.,
        96.,  97.,  98.,  99., 100., 101., 102., 103., 104., 105., 106., 107.,
       108., 109., 110., 111., 112., 113., 114., 115., 116., 117., 118., 119.,
       120., 121., 122., 123., 124., 125., 126., 127., 128., 129., 130., 131.,
       132., 133., 134., 135., 136., 137., 138., 139., 140., 141., 142., 143.,
       144., 145., 146., 147., 148., 149.])</pre></li></ul></div></li><li class='xr-section-item'><input id='section-0f6c2c8e-0232-496b-9081-d42edd72328f' class='xr-section-summary-in' type='checkbox'  checked><label for='section-0f6c2c8e-0232-496b-9081-d42edd72328f' class='xr-section-summary' >Data variables: <span>(3)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>tas</span></div><div class='xr-var-dims'>(source_id, year)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>1.071 2.014 2.323 ... 5.863 5.674</div><input id='attrs-03872aa5-2cb2-4f59-adcb-7f86b931616a' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-03872aa5-2cb2-4f59-adcb-7f86b931616a' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-f19bcce1-4940-4290-b78d-40ba454e5af0' class='xr-var-data-in' type='checkbox'><label for='data-f19bcce1-4940-4290-b78d-40ba454e5af0' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Global Mean Surface Temp Anom</dd><dt><span>units :</span></dt><dd>K</dd></dl></div><pre class='xr-var-data'>array([[1.07140938, 2.01418725, 2.32329552, ..., 6.59542693, 6.82945103,
        6.8111678 ],
       [0.77630324, 1.54849902, 1.99621127, ..., 5.46338329, 5.67455221,
        5.71011885],
       [1.00519735, 1.5956824 , 2.03112341, ..., 5.08050477, 5.00847584,
        5.06884568],
       ...,
       [1.22488971, 1.83075937, 2.28076608, ..., 4.91859565, 4.88396244,
        4.93210955],
       [1.10485156, 1.75037195, 2.10227896, ..., 4.96820934, 5.12473339,
        5.08269726],
       [0.85772646, 1.80699284, 2.22705602, ..., 5.68410647, 5.86317912,
        5.67399347]])</pre></li><li class='xr-var-item'><div class='xr-var-name'><span>imbalance</span></div><div class='xr-var-dims'>(source_id, year)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>7.382 6.014 5.277 ... 2.088 1.652</div><input id='attrs-4ec4777c-f84d-4c3a-831d-953dfb908855' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-4ec4777c-f84d-4c3a-831d-953dfb908855' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-b51a8638-e533-4dce-aef0-b82ac77932ac' class='xr-var-data-in' type='checkbox'><label for='data-b51a8638-e533-4dce-aef0-b82ac77932ac' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>long_name :</span></dt><dd>Global Mean Radiative Imbalance</dd><dt><span>units :</span></dt><dd>W m$^{-2}$</dd></dl></div><pre class='xr-var-data'>array([[7.3822011 , 6.01442788, 5.27732898, ..., 2.08403801, 1.90367848,
        2.09055191],
       [6.42770942, 5.35725862, 4.44059965, ..., 2.17778539, 1.98275413,
        1.48539794],
       [5.99409842, 5.02770126, 4.00251529, ..., 1.13401458, 0.68426765,
        1.34068237],
       ...,
       [6.66663372, 5.40006168, 4.9338541 , ..., 1.11458603, 1.51565168,
        1.39990357],
       [6.71983098, 5.38980328, 4.06186154, ..., 1.87835944, 1.49531531,
        1.18584212],
       [7.6333428 , 6.72012888, 5.19681795, ..., 2.25410934, 2.08828752,
        1.65183319]])</pre></li><li class='xr-var-item'><div class='xr-var-name'><span>ecs</span></div><div class='xr-var-dims'>(source_id)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>4.728 3.861 3.021 ... 3.162 3.678</div><input id='attrs-8800ecc8-7ae3-461f-8476-a641f2d37e1e' class='xr-var-attrs-in' type='checkbox' disabled><label for='attrs-8800ecc8-7ae3-461f-8476-a641f2d37e1e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-bf617996-f899-43c7-9d3f-5c7696a144fe' class='xr-var-data-in' type='checkbox'><label for='data-bf617996-f899-43c7-9d3f-5c7696a144fe' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'></dl></div><pre class='xr-var-data'>array([4.72774212, 3.86063798, 3.02121386, 3.24319606, 2.2881862 ,
       5.16811095, 4.74685881, 5.61545956, 4.29909584, 3.93408025,
       2.67987955, 2.7172949 , 3.08350956, 1.84413692, 2.56934772,
       2.95965585, 3.1617218 , 3.6779399 ])</pre></li></ul></div></li><li class='xr-section-item'><input id='section-9fdc5f3e-82c9-4457-9721-501b54ff86c4' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-9fdc5f3e-82c9-4457-9721-501b54ff86c4' class='xr-section-summary'  title='Expand/collapse section'>Attributes: <span>(0)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'></dl></div></li></ul></div></div></div>
</div>
<p>Reproduce a plot similar to <a class="reference external" href="https://twitter.com/mzelinka/status/1255534531144085513">Mark Zelinka’s</a>:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">fg</span> <span class="o">=</span> <span class="n">ds_abrupt</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s1">&#39;tas&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;imbalance&#39;</span><span class="p">,</span> <span class="n">col</span><span class="o">=</span><span class="s1">&#39;source_id&#39;</span><span class="p">,</span> <span class="n">col_wrap</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">calc_and_plot_ecs</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">polyfit</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">ecs</span> <span class="o">=</span> <span class="o">-</span><span class="mf">0.5</span> <span class="o">*</span> <span class="n">b</span><span class="o">/</span><span class="n">a</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">autoscale</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">],</span> <span class="n">np</span><span class="o">.</span><span class="n">polyval</span><span class="p">([</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">]),</span> <span class="s1">&#39;k&#39;</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;ECS = </span><span class="si">{</span><span class="n">ecs</span><span class="si">:</span><span class="s1">3.2f</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">fontdict</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;weight&#39;</span><span class="p">:</span> <span class="s1">&#39;bold&#39;</span><span class="p">,</span> <span class="s1">&#39;size&#39;</span><span class="p">:</span> <span class="mi">12</span><span class="p">})</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>

<span class="n">fg</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">calc_and_plot_ecs</span><span class="p">,</span> <span class="s1">&#39;tas&#39;</span><span class="p">,</span> <span class="s1">&#39;imbalance&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[20]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;xarray.plot.facetgrid.FacetGrid at 0x7f8231775990&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/repos_pangeo-gallery_cmip6_ECS_Gregory_method_41_1.png" class="no-scaled-link" src="../../../_images/repos_pangeo-gallery_cmip6_ECS_Gregory_method_41_1.png" style="width: 1134px; height: 854px;" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[21]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ds_abrupt</span><span class="o">.</span><span class="n">ecs</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">hist</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/repos_pangeo-gallery_cmip6_ECS_Gregory_method_42_0.png" class="no-scaled-link" src="../../../_images/repos_pangeo-gallery_cmip6_ECS_Gregory_method_42_0.png" style="width: 706px; height: 386px;" />
</div>
</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">ds_abrupt</span><span class="o">.</span><span class="n">ecs</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s1">&#39;ecs&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[22]:
</pre></div>
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
&lt;matplotlib.axes._subplots.AxesSubplot at 0x7f8230fd0e50&gt;
</pre></div></div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<img alt="../../../_images/repos_pangeo-gallery_cmip6_ECS_Gregory_method_43_1.png" class="no-scaled-link" src="../../../_images/repos_pangeo-gallery_cmip6_ECS_Gregory_method_43_1.png" style="width: 697px; height: 442px;" />
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>
</pre></div>
</div>
</div>
<script type="application/vnd.jupyter.widget-state+json">
{"state": {"0fb8142ea4b34eeb8555e08212b22158": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "12ab2a191f3f49a185431cb7c2545ff6": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_fc92f7dbddcb4a029024f721e68c7260", "IPY_MODEL_66d02ed56b634e3797bf5c13fb187485"], "layout": "IPY_MODEL_fa4dff453c394a2093ddbd2beb6c66b8"}}, "14076bee1833492cac32649e6d2850ca": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "HTMLView", "description": "", "description_tooltip": null, "layout": "IPY_MODEL_6ae1df1cf1d14c45892d49d59930fb7b", "placeholder": "\u200b", "style": "IPY_MODEL_d683ed2003ab49cd9469cc8ad72c35fe", "value": "\n<div>\n<style scoped>\n    .dataframe tbody tr th:only-of-type {\n        vertical-align: middle;\n    }\n\n    .dataframe tbody tr th {\n        vertical-align: top;\n    }\n\n    .dataframe thead th {\n        text-align: right;\n    }\n</style>\n<table style=\"text-align: right;\">\n    <tr><th>Workers</th> <td>1</td></tr>\n    <tr><th>Cores</th> <td>2</td></tr>\n    <tr><th>Memory</th> <td>4.29 GB</td></tr>\n</table>\n</div>\n"}}, "159b6731a54e4c978e3d0829136c43c6": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "ButtonStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "ButtonStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "button_color": null, "font_weight": ""}}, "18bf79bdd57146a2a6ed296917d98199": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "1c70bbc21871444fa638f2e158d35fd2": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "IntTextModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "IntTextModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "IntTextView", "continuous_update": false, "description": "Minimum", "description_tooltip": null, "disabled": false, "layout": "IPY_MODEL_a8b264b38ce840408d861b04018f0b7b", "step": 1, "style": "IPY_MODEL_cf99981bac94430f8be6094288613f5c", "value": 0}}, "24803d96a6174b98aac3f6467bcaa9b4": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "HTMLView", "description": "", "description_tooltip": null, "layout": "IPY_MODEL_18bf79bdd57146a2a6ed296917d98199", "placeholder": "\u200b", "style": "IPY_MODEL_abd76dd3d9c44f7d9bc0576dd4eff69c", "value": "<h2>GatewayCluster</h2>"}}, "266d3d21954a42ac93a709f442e1468d": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "DescriptionStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "DescriptionStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "description_width": ""}}, "26ffe97cb03249599c5d1f040926cb08": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "29c9c07cf0924ac18f37b7e4b02777af": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": "500px", "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "365a2cc7173d449ca62fe8768b0ad475": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "IntTextModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "IntTextModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "IntTextView", "continuous_update": false, "description": "Maximum", "description_tooltip": null, "disabled": false, "layout": "IPY_MODEL_a8b264b38ce840408d861b04018f0b7b", "step": 1, "style": "IPY_MODEL_4ba3f87a1de249eca6ee2a9e5cd6885d", "value": 0}}, "371eee66faa4477aabddc6fa34fea67e": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_ad85e2725f384e07b1894e1d0acb16dd", "IPY_MODEL_95b7a687eec9491b8ec299e5796fd248"], "layout": "IPY_MODEL_0fb8142ea4b34eeb8555e08212b22158"}}, "4ba3f87a1de249eca6ee2a9e5cd6885d": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "DescriptionStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "DescriptionStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "description_width": ""}}, "4f44d65a9aee47d29d81d1294b8befc6": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "ProgressStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "ProgressStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "bar_color": null, "description_width": "initial"}}, "5b6d058fc307491ea12c5ce6c9d72b23": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "AccordionModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "AccordionModel", "_titles": {"0": "Manual Scaling", "1": "Adaptive Scaling"}, "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "AccordionView", "box_style": "", "children": ["IPY_MODEL_12ab2a191f3f49a185431cb7c2545ff6", "IPY_MODEL_735cb4b747d248f9be09a6ed381683f4"], "layout": "IPY_MODEL_29c9c07cf0924ac18f37b7e4b02777af", "selected_index": null}}, "5d5a676fb8e64eb8b8461f30255dbed8": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "66d02ed56b634e3797bf5c13fb187485": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "ButtonModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "ButtonModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "ButtonView", "button_style": "", "description": "Scale", "disabled": false, "icon": "", "layout": "IPY_MODEL_a8b264b38ce840408d861b04018f0b7b", "style": "IPY_MODEL_159b6731a54e4c978e3d0829136c43c6", "tooltip": ""}}, "6ae1df1cf1d14c45892d49d59930fb7b": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": "150px", "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "71a1bf6339c7488586dff28e687687de": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "726cdf22fc8d43878c461548ccec00d1": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "DescriptionStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "DescriptionStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "description_width": ""}}, "735cb4b747d248f9be09a6ed381683f4": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_1c70bbc21871444fa638f2e158d35fd2", "IPY_MODEL_365a2cc7173d449ca62fe8768b0ad475", "IPY_MODEL_73cc37ebddaa4222a22c5b210996e871"], "layout": "IPY_MODEL_26ffe97cb03249599c5d1f040926cb08"}}, "73cc37ebddaa4222a22c5b210996e871": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "ButtonModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "ButtonModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "ButtonView", "button_style": "", "description": "Adapt", "disabled": false, "icon": "", "layout": "IPY_MODEL_a8b264b38ce840408d861b04018f0b7b", "style": "IPY_MODEL_7a3c067de3784e3998cff7f4181b591c", "tooltip": ""}}, "778824ee272e45c1a527026743482b06": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "HBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "HBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "HBoxView", "box_style": "", "children": ["IPY_MODEL_14076bee1833492cac32649e6d2850ca", "IPY_MODEL_5b6d058fc307491ea12c5ce6c9d72b23"], "layout": "IPY_MODEL_e9d2828b843e4e689096a4428e06f90b"}}, "7a3c067de3784e3998cff7f4181b591c": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "ButtonStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "ButtonStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "button_color": null, "font_weight": ""}}, "85ffc0f49fdf40ba8b1955e5446dc3c3": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "DescriptionStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "DescriptionStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "description_width": ""}}, "95b7a687eec9491b8ec299e5796fd248": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "HTMLView", "description": "", "description_tooltip": null, "layout": "IPY_MODEL_f17424cd8962436abdc770cf65de6d58", "placeholder": "\u200b", "style": "IPY_MODEL_85ffc0f49fdf40ba8b1955e5446dc3c3", "value": " 22/22 [00:02&lt;00:00,  8.98it/s]"}}, "95e57e7c797842cb9932c59056bb4689": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "VBoxModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "VBoxModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "VBoxView", "box_style": "", "children": ["IPY_MODEL_24803d96a6174b98aac3f6467bcaa9b4", "IPY_MODEL_778824ee272e45c1a527026743482b06", "IPY_MODEL_b1b842ed33bd48cba8d1fc444e1ce36a", "IPY_MODEL_bbfc748b46514afa8758900c32d1a545"], "layout": "IPY_MODEL_71a1bf6339c7488586dff28e687687de"}}, "a1d282b3abea47dc878eee0c1ffc7e71": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "a8128c550728478ca29fd09060267646": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "a8b264b38ce840408d861b04018f0b7b": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": "150px"}}, "abd76dd3d9c44f7d9bc0576dd4eff69c": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "DescriptionStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "DescriptionStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "description_width": ""}}, "ad85e2725f384e07b1894e1d0acb16dd": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "FloatProgressModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "FloatProgressModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "ProgressView", "bar_style": "success", "description": "100%", "description_tooltip": null, "layout": "IPY_MODEL_a1d282b3abea47dc878eee0c1ffc7e71", "max": 22.0, "min": 0.0, "orientation": "horizontal", "style": "IPY_MODEL_4f44d65a9aee47d29d81d1294b8befc6", "value": 22.0}}, "b1b842ed33bd48cba8d1fc444e1ce36a": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "HTMLView", "description": "", "description_tooltip": null, "layout": "IPY_MODEL_5d5a676fb8e64eb8b8461f30255dbed8", "placeholder": "\u200b", "style": "IPY_MODEL_726cdf22fc8d43878c461548ccec00d1", "value": "<p><b>Name: </b>prod.641d4b182fd14c2997184658c2a11a5b</p>"}}, "bbfc748b46514afa8758900c32d1a545": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "HTMLModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "HTMLModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "HTMLView", "description": "", "description_tooltip": null, "layout": "IPY_MODEL_a8128c550728478ca29fd09060267646", "placeholder": "\u200b", "style": "IPY_MODEL_266d3d21954a42ac93a709f442e1468d", "value": "<p><b>Dashboard: </b><a href=\"https://hub.binder.pangeo.io/services/dask-gateway/clusters/prod.641d4b182fd14c2997184658c2a11a5b/status\" target=\"_blank\">https://hub.binder.pangeo.io/services/dask-gateway/clusters/prod.641d4b182fd14c2997184658c2a11a5b/status</a></p>\n"}}, "cf99981bac94430f8be6094288613f5c": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "DescriptionStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "DescriptionStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "description_width": ""}}, "d683ed2003ab49cd9469cc8ad72c35fe": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "DescriptionStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "DescriptionStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "description_width": ""}}, "d77a8164bf8a4c56bf579abebfd57b2c": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "DescriptionStyleModel", "state": {"_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "DescriptionStyleModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "StyleView", "description_width": ""}}, "e9d2828b843e4e689096a4428e06f90b": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "f17424cd8962436abdc770cf65de6d58": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "fa4dff453c394a2093ddbd2beb6c66b8": {"model_module": "@jupyter-widgets/base", "model_module_version": "1.2.0", "model_name": "LayoutModel", "state": {"_model_module": "@jupyter-widgets/base", "_model_module_version": "1.2.0", "_model_name": "LayoutModel", "_view_count": null, "_view_module": "@jupyter-widgets/base", "_view_module_version": "1.2.0", "_view_name": "LayoutView", "align_content": null, "align_items": null, "align_self": null, "border": null, "bottom": null, "display": null, "flex": null, "flex_flow": null, "grid_area": null, "grid_auto_columns": null, "grid_auto_flow": null, "grid_auto_rows": null, "grid_column": null, "grid_gap": null, "grid_row": null, "grid_template_areas": null, "grid_template_columns": null, "grid_template_rows": null, "height": null, "justify_content": null, "justify_items": null, "left": null, "margin": null, "max_height": null, "max_width": null, "min_height": null, "min_width": null, "object_fit": null, "object_position": null, "order": null, "overflow": null, "overflow_x": null, "overflow_y": null, "padding": null, "right": null, "top": null, "visibility": null, "width": null}}, "fc92f7dbddcb4a029024f721e68c7260": {"model_module": "@jupyter-widgets/controls", "model_module_version": "1.5.0", "model_name": "IntTextModel", "state": {"_dom_classes": [], "_model_module": "@jupyter-widgets/controls", "_model_module_version": "1.5.0", "_model_name": "IntTextModel", "_view_count": null, "_view_module": "@jupyter-widgets/controls", "_view_module_version": "1.5.0", "_view_name": "IntTextView", "continuous_update": false, "description": "Workers", "description_tooltip": null, "disabled": false, "layout": "IPY_MODEL_a8b264b38ce840408d861b04018f0b7b", "step": 1, "style": "IPY_MODEL_d77a8164bf8a4c56bf579abebfd57b2c", "value": 0}}}, "version_major": 2, "version_minor": 0}
</script></div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2020, Pangeo Developers.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.1.2.<br/>
    </p>
  </div>
</footer>
  </body>
</html>